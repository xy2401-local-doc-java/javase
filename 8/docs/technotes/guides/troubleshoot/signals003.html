<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en" xml:lang="en">
<head>
<meta content="text/html; charset=us-ascii" http-equiv="Content-Type"/>
<meta content="text/css" http-equiv="Content-Style-Type"/>
<meta content="text/javascript" http-equiv="Content-Script-Type"/>
<title>Signal Chaining</title>
<meta content="Oracle DARB XHTML Converter (Mode = document) - Merged Version 1033" name="generator"/>
<meta content="This guide helps you to troubleshoot issues that might occur with Java Client applications created on the Java Platform, Standard Edition (Java SE) and Java HotSpot VM." name="description"/>
<meta content="2014-12-22T14:9:28Z" name="date"/>
<meta content="noarchive" name="robots"/>
<meta content="Java Platform, Standard Edition Troubleshooting Guide, Release 8" name="doctitle"/>
<meta content="Release 8" name="relnum"/>
<meta content="E54483-02" name="partnum"/>
<meta content="JSTGD" name="docid"/>






<script language="javascript1.2" type="text/javascript" src="../../../../../webdesign/pubs8/js/popUp.js"></script>
<script language="javascript1.2" type="text/javascript" src="../../../../../webdesign/pubs8/js/sniff.js"></script>
<script language="javascript1.2" type="text/javascript" src="../../../../../webdesign/pubs8/js/menucontent.js"></script>
<script language="javascript1.2" type="text/javascript" src="../../../../../webdesign/pubs8/js/menucode.js"></script>
<script language="javascript1.2" type="text/javascript" src="../../../../../webdesign/pubs8/js/developer.js"></script>
<script language="javascript1.2" type="text/javascript" src="../../../../../webdesign/other/js/search.js"></script>
<link rel="stylesheet" type="text/css" href="../../../../../webdesign/pubs8/css/default_developer.css" />
<meta name="collection" content="reference"/> 
<script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>
<body>
<noscript>JavaScript is not supported by your browser. JavaScript
support is required for full functionality of this page.</noscript>
<div class="a0 a0v1" id="a0v1"><!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1 a1r2">
<div class="a1v0"><a href="#skip2content" class="skiplink">Skip to
Content</a></div>
</div>
<!-- END A1 COMPONENT V.0 -->
<!-- BEGIN A2 COMPONENT V.1 -->
<div class="a2w0">
<div class="a2" id="a2v1">
<div class="a2w1">
<div class="a2w2">
<div class="a2w3">
<div class="a2w4">
<div class="a2topiclinks"><a href="http://www.oracle.com" title=
"Oracle Home Page" id="sunlogo" name="sunlogo"><img src=
"../../../../../webdesign/pubs8/im/a.gif" alt="Home Page" width="98" height="58"
border="0" /></a>
<ul id="mtopics">
<li id="mtopic1"><a id="glink1" class="tpclink a2menu" title=
"See Oracle Technology Network" href="http://oracle.com/technology"
name="glink1">Oracle Technology Network</a></li>
<li id="mtopic2"><a id="glink2" class="tpclink a2menu" title=
"Software Downloads" href=
"http://www.oracle.com/technology/software/index.html" name=
"glink2">Software Downloads</a></li>
<li id="mtopic3"><a id="glink3" class="tpclink a2menu" title=
"See Java SE Documentation" href=
"http://docs.oracle.com/javase/index.html" name=
"glink3">Documentation</a></li>
</ul>
<div class="a2search"><a href="../../../../../search.html" target=
"_blank">Search</a></div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<!-- END A2 COMPONENT V.1 -->
<!-- BEGIN SEPARATOR -->
<div class="hr">
<hr /></div>
<!-- END SEPARATOR -->
<!-- ============ -->
<!-- MAIN CONTENT -->
<!-- ============ -->
<a name="skip2content" id="skip2content"></a>


<b>Java Platform, Standard Edition Troubleshooting Guide</b><br/>

<a href="toc.html">
                Contents</a>&nbsp;&nbsp;&nbsp;<a href="signals002.html">
                Previous</a>&nbsp;&nbsp;&nbsp;<a href="signals004.html">
                Next</a><hr/><a id="CIHFCAIG" name="CIHFCAIG"/>
<div id="JSTGD351">
<div class="smallpagetitle"><h1><span>7.3</span> Signal Chaining</h1></div>
<p>If an application with native code requires its own signal handlers, then it might need to be used with the signal chaining facility. The signal chaining facility offers the following features:</p>
<ul>
<li>
<p>Support for pre-installed signal handlers when the HotSpot VM is created.</p>
<p>When the VM is first created, existing signal handlers (that is, handlers for signals that are used by the VM) are saved. During execution, when any of these signals are raised and found not to be targeted at the Java HotSpot VM, the pre-installed handlers are invoked. In other words, pre-installed handlers are <span>chained</span> behind the VM handlers for these signals.</p>
</li>
<li>
<p>Support for signal handler installation after the HotSpot VM is created, either inside JNI code or from another native thread.</p>
<p>An application can link and load the libjsig.so shared library before libc/libthread/libpthread. This library ensures that calls such as <code dir="ltr">signal()</code>, <code dir="ltr">sigset()</code>, and <code dir="ltr">sigaction()</code> are intercepted so that they do not actually replace the Java HotSpot VM's signal handlers if the handlers conflict with those already installed by the VM. Instead, these calls save the new signal handlers (or <span>chain</span> them behind the VM-installed handlers). During execution, when any of these signals are raised and found not to be targeted at the Java HotSpot VM, the pre-installed handlers are invoked.</p>
<p>If support for signal handler installation after the creation of the VM is not required, then the libjsig.so shared library is not needed.</p>
<p>Perform one of these two procedures to use the libjsig.so shared library:</p>
<ul>
<li>
<p>Link it with the application that creates/embeds the HotSpot VM:</p>
<pre dir="ltr" xml:space="preserve">
cc -L <span>libjvm.so-directory</span> -ljsig -ljvm java_application.c
</pre></li>
<li>
<p>Use the <code dir="ltr">LD_PRELOAD</code> environment variable:</p>
<ul>
<li>
<p>KornShell (ksh):</p>
<pre dir="ltr" xml:space="preserve">
export LD_PRELOAD=<span>libjvm.so-directory</span>/libjsig.so; java_application(ksh)
</pre></li>
<li>
<p>C shell (csh):</p>
<pre dir="ltr" xml:space="preserve">
setenv LD_PRELOAD <span>libjvm.so-directory</span>/libjsig.so; java_application(csh)
</pre></li>
</ul>
</li>
</ul>
<p>The interposed <code dir="ltr">signal()</code>, <code dir="ltr">sigset()</code>, and <code dir="ltr">sigaction()</code> return the saved signal handlers, not the signal handlers installed by the Java HotSpot VM and which are seen by the operating system.</p>
</li>
</ul>
<p><i>Note:</i> <code dir="ltr">SIGUSR1</code> cannot be chained. If an application attempts to chain this signal on Oracle Solaris operating system, then the HotSpot VM terminates with a fatal error as shown in <a href="#CIHFAJIJ">Example 7-3</a>.</p>
<div id="JSTGD352"><a id="CIHFAJIJ" name="CIHFAJIJ"/>
<p>Example 7-3 HotSpot VM Fatal Error</p>
<pre dir="ltr" xml:space="preserve">
Signal chaining detected for VM interrupt signal, try -XX:+UseAltSigs
</pre></div>

<p>Also, the <code dir="ltr">SIGQUIT</code>, <code dir="ltr">SIGTERM</code>, <code dir="ltr">SIGINT</code>, and <code dir="ltr">SIGHUP</code> signals cannot be chained. If the application needs to handle these signals, consider using the <code dir="ltr">-Xrs</code> option.</p>
<p>On Oracle Solaris operating system, the <code dir="ltr">SIGUSR2</code> signal can be chained only for non-Java and non-VM threads (that is, it can only be used for native threads created by applications that do not attach to the VM).</p>
</div>
<a href="toc.html">
                Contents</a>&nbsp;&nbsp;&nbsp;<a href="signals002.html">
                Previous</a>&nbsp;&nbsp;&nbsp;<a href="signals004.html">
                Next</a><hr/>





<div id="javasefooter">
<div class="hr">
<hr /></div>
<div id="javasecopyright">
<a href="../../../legal/cpyr.html">Copyright &#169;</a> 1993, 2018, Oracle
and/or its affiliates. All rights reserved.
</div>

<div id="javasecontactus">
<a href="http://docs.oracle.com/javase/feedback.html">Contact Us</a>
</div>
</div>
</div>

<!-- Start SiteCatalyst code -->
<script type="application/javascript" src="https://www.oracleimg.com/us/assets/metrics/ora_docs.js"></script>
<!-- End SiteCatalyst code -->

</body>
</html>
