<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en-US" xmlns="http://www.w3.org/1999/xhtml" xml:lang=
"en-US">
<head>
<meta http-equiv="content-type" content=
"text/html; charset=utf-8" />
<title>Advanced JGSS Security Programming</title>

<script language="javascript1.2" type="text/javascript" src="../../../../../../../webdesign/pubs8/js/popUp.js"></script>
<script language="javascript1.2" type="text/javascript" src="../../../../../../../webdesign/pubs8/js/sniff.js"></script>
<script language="javascript1.2" type="text/javascript" src="../../../../../../../webdesign/pubs8/js/menucontent.js"></script>
<script language="javascript1.2" type="text/javascript" src="../../../../../../../webdesign/pubs8/js/menucode.js"></script>
<script language="javascript1.2" type="text/javascript" src="../../../../../../../webdesign/pubs8/js/developer.js"></script>
<script language="javascript1.2" type="text/javascript" src="../../../../../../../webdesign/other/js/search.js"></script>
<link rel="stylesheet" type="text/css" href="../../../../../../../webdesign/pubs8/css/default_developer.css" />
<meta name="collection" content="reference"/> 
<script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>
<body>
<noscript>JavaScript is not supported by your browser. JavaScript
support is required for full functionality of this page.</noscript>
<div class="a0 a0v1" id="a0v1"><!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1 a1r2">
<div class="a1v0"><a href="#skip2content" class="skiplink">Skip to
Content</a></div>
</div>
<!-- END A1 COMPONENT V.0 -->
<!-- BEGIN A2 COMPONENT V.1 -->
<div class="a2w0">
<div class="a2" id="a2v1">
<div class="a2w1">
<div class="a2w2">
<div class="a2w3">
<div class="a2w4">
<div class="a2topiclinks"><a href="http://www.oracle.com" title=
"Oracle Home Page" id="sunlogo" name="sunlogo"><img src=
"../../../../../../../webdesign/pubs8/im/a.gif" alt="Home Page" width="98" height="58"
border="0" /></a>
<ul id="mtopics">
<li id="mtopic1"><a id="glink1" class="tpclink a2menu" title=
"See Oracle Technology Network" href="http://oracle.com/technology"
name="glink1">Oracle Technology Network</a></li>
<li id="mtopic2"><a id="glink2" class="tpclink a2menu" title=
"Software Downloads" href=
"http://www.oracle.com/technology/software/index.html" name=
"glink2">Software Downloads</a></li>
<li id="mtopic3"><a id="glink3" class="tpclink a2menu" title=
"See Java SE Documentation" href=
"http://docs.oracle.com/javase/index.html" name=
"glink3">Documentation</a></li>
</ul>
<div class="a2search"><a href="../../../../../../../search.html" target=
"_blank">Search</a></div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<!-- END A2 COMPONENT V.1 -->
<!-- BEGIN SEPARATOR -->
<div class="hr">
<hr /></div>
<!-- END SEPARATOR -->
<!-- ============ -->
<!-- MAIN CONTENT -->
<!-- ============ -->
<a name="skip2content" id="skip2content"></a>


<div class="smallpagetitle"><h1><a name="PART5" id="PART5">Part V : Secure
Authentication Using SPNEGO Java GSS Mechanism</a></h1></div>
<h2><a name="SPNEGO" id="SPNEGO"></a>Exercise 8: Using the Java
Generic Security Services (GSS) API with SPNEGO</h2>

<p>Java GSS is a framework that can support multiple security
mechanisms; a way to negotiate a security mechanism underneath
GSS-API is needed. This is available via SPNEGO.</p>
<p>SPNEGO is standardized at IETF in <a href=
"http://www.ietf.org/rfc/rfc4178.txt">RFC 4178.</a> It is a
pseudo-security mechanism used to negotiate an underlying security
mechanism. It provides the flexibility for client and server to
securely negotiate a common GSS security mechanism.</p>
<p>Microsoft makes heavy use of SPNEGO. SPNEGO can be used to
inter-operate with Microsoft Server over HTTP, to support
HTTP-based cross-platform authentication via the Negotiate
Protocol.</p>
<p>Currently, when using Java GSS with Kerberos, we specify the
Kerberos OID as follows:</p>
<pre class="codeblock">
Oid krb5Oid = new Oid("1.2.840.113554.1.2.2");
</pre>
<p>In order to use SPNEGO, you only need to specify the
SPNEGO OID as follows:</p>
<pre class="codeblock">
Oid spnegoOid = new Oid("1.3.6.1.5.5.2");
</pre>
<p>Then you can use the SPNEGO OID when creating a
<code>GSSCredential</code>, <code>GSSContext</code>, etc.</p>

<h3>Goal of this exercise</h3>
<p>Currently the only security mechansim available with Java GSS is
Kerberos. The goal of this exercise is to learn how to use other
Java GSS mechanisms, such as the Simple and Protected GSS-API Negotiation
Mechanism (SPNEGO), to secure the association.</p>

<h3>Steps to follow</h3>
<ol>
<li><p>Read the <a href=
"src/GssSpNegoClient.java"><code>GssSpNegoClient.java</code></a> code.</p></li>
<li><p>Compile the sample code:</p>
<pre class="codeblock">
% javac GssSpNegoClient.java
</pre></li>
<li><p>Read the <a href=
"src/GssSpNegoServer.java"><code>src/GssSpNegoServer.java</code></a> code.</p></li>

<li><p>Compile the sample code:</p>
<pre class="codeblock">
% javac GssSpNegoServer.java
</pre></li>

<li><p>Launch a new window and start the server:</p>
<pre class="codeblock">
% xterm &amp;
% java -Djava.security.auth.login.config=jaas-krb5.conf GssSpNegoServer
</pre></li>
<li><p>Run the client application. <code>GssSpNegoClient</code> takes two
parameters: the service name and the name of the server that the
service is running on. For example, if the service is
<code>host</code> running on the machine <code>j1hol-001</code>, use the following (provide a secure password when prompted):</p>
<pre class="codeblock">
% java -Djava.security.auth.login.config=jaas-krb5.conf \
GssSpNegoClient host j1hol-001
</pre></li>
</ol>
<p>Sample output for running <code>GssSpNegoServer</code>:</p>
<pre class="codeblock">
Authenticated principal: [host/j1hol-001@J1LABS.EXAMPLE.COM]
Waiting for incoming connections...
Got connection from client /129.145.128.102
SPNEGO Negotiated Mechanism = 1.2.840.113554.1.2.2 Kerberos V5
Context Established!
Client principal is test@J1LABS.EXAMPLE.COM
Server principal is
host/j1hol-001@J1LABS.EXAMPLE.COM
Mutual authentication took place!
Received data "Hello There!" of length 12
Confidentiality applied: true
Sending: Hello There! Thu May 06 12:11:15 PDT 2005
</pre>

<p>Sample output for running <code>GssSpNegoClient</code> (<i>password</i> is replaced with the password you provided before):</p>
<pre class="codeblock">
Kerberos password for test: password
Authenticated principal: [test@J1LABS.EXAMPLE.COM]
Connected to address j1hol-001/129.145.128.102
SPNEGO Negotiated Mechanism = 1.2.840.113554.1.2.2 Kerberos V5
Context Established!
Client principal is test@J1LABS.EXAMPLE.COM
Server principal is host@j1hol-001
Mutual authentication took place!
Sending message: Hello There!
Will read token of size 93
Received message: Hello There! Thu May 06 12:11:15 PDT 2005
</pre>

<h3>Summary</h3>
<p>In this exercise, you learned
how to write a client-server application that uses the Java GSS API
with SPNEGO to negotiate an underlying security mechanism, such as
Kerberos, and communicate securely using Kerberos as the underlying
authentication system.</p>
<hr />
<p><b>NOTE:</b> Microsoft has implemented certain variations of the
SPNEGO protocol, hence to inter-operate with Microsoft, we have
added a separate mode via a new system property
<code>sun.security.spnego.msinterop</code>. This property is enabled to <code>true</code>
by default. To disable it, you need to explicitly set this property
to <code>false</code>. To enable SPNEGO debugging, you can set the system
property <code>sun.security.spnego.debug=true</code>.</p>
<hr />

<div id="javasefooter">
<div class="hr">
<hr /></div>
<div id="javasecopyright">
<a href="../../../../../legal/cpyr.html">Copyright &#169;</a> 1993, 2018, Oracle
and/or its affiliates. All rights reserved.
</div>

<div id="javasecontactus">
<a href="http://docs.oracle.com/javase/feedback.html">Contact Us</a>
</div>
</div>
</div>

<!-- Start SiteCatalyst code -->
<script type="application/javascript" src="https://www.oracleimg.com/us/assets/metrics/ora_docs.js"></script>
<!-- End SiteCatalyst code -->

</body>
</html>
