<!DOCTYPE html>
<html lang="en-US" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<meta http-equiv="Content-Type" content="UTF-8" />
<title>Snippets</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)" />
<meta name="description" content="JShell accepts Java statements; variable, method, and class definitions; imports; and expressions. These pieces of Java code are referred to as snippets." />
<meta name="dcterms.created" content="2017-09-14T11:40:59Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Java Platform, Standard Edition Java Shell User&rsquo;s Guide" />
<meta name="dcterms.identifier" content="E87478-01" />
<meta name="dcterms.isVersionOf" content="JSHEL" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../index.html" title="Home" type="text/html" />
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Prev" href="introduction-jshell.htm" title="Previous" type="text/html" />
<link rel="Next" href="commands.htm" title="Next" type="text/html" />
<link rel="alternate" href="JSHEL.pdf" title="PDF version" type="application/pdf" />
<link rel="alternate" href="JSHEL.epub" title="ePub version" type="application/epub+zip" />
<link rel="alternate" href="JSHEL.mobi" title="Mobipocket version" type="application/x-mobipocket-ebook" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/fonts.css">
<link rel="stylesheet" href="../dcommon/css/foundation.css">
<link rel="stylesheet" href="../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css">
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
<script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-064E541A-911A-4BA6-BE2F-B03818FB8F6A"></a> <span id="PAGE" style="display:none;">5/10</span> <!-- End Header -->
<h1 id="JSHEL-GUID-064E541A-911A-4BA6-BE2F-B03818FB8F6A" class="sect1"><span class="enumeration_chapter">2</span> Snippets</h1>
<div>
<p>JShell accepts Java statements; variable, method, and class definitions; imports; and expressions. These pieces of Java code are referred to as snippets.</p>
<div class="section">
<p class="subhead1">Topics</p>
<ul style="list-style-type: disc;">
<li>
<p><a href="snippets.htm#GUID-91924322-1F68-4E47-9AC6-CAD8A3114E21" title="Snippets of Java code are entered into JShell and immediately evaluated. Feedback about the results, actions performed, and any errors that occurred is shown. Use the examples in this section to give JShell a try.">Trying Out Snippets</a></p>
</li>
<li>
<p><a href="snippets.htm#GUID-614373AD-8D94-462A-B05E-DFA35DF098C9" title="As you experiment with code, you might find that the definition of a variable, method, or class isn&rsquo;t doing what you want it to do. The definition is easily changed by entering a new one, which overwrites the previous definition.">Changing Definitions</a></p>
</li>
<li>
<p><a href="snippets.htm#GUID-DA21BC6E-9C07-4C67-842F-BEEC7B8FF85F" title="JShell accepts method definitions that reference methods, variables, or classes that aren&rsquo;t yet defined. This is done to support exploratory programming and because some forms of programming require it.">Forward References</a></p>
</li>
<li>
<p><a href="snippets.htm#GUID-C265A167-24D4-435D-998F-230BD0E32149" title="In an exception backtrace, feedback identifies the snippet and the location within the snippet where the exception occurred.">Exceptions</a></p>
</li>
<li>
<p><a href="snippets.htm#GUID-E24D9E84-C9E3-43DE-B14D-C9544A35E5FC" title="When you enter snippets, use the Tab key to automatically complete the item. If the item can&rsquo;t be determined from what was entered, then possible options are provided.">Tab Completion for Snippets</a></p>
</li>
<li>
<p><a href="snippets.htm#GUID-63DBC3E7-6EF2-498D-8638-94867ED10F76" title="JShell makes it easy to import a needed class when it is first referenced and convert an expression to a variable declaration using keyboard shortcuts.">Snippet Transformation</a></p>
</li>
</ul>
</div>
<!-- class="section" --></div>
<div class="sect2"><a id="GUID-91924322-1F68-4E47-9AC6-CAD8A3114E21"></a>
<h2 id="JSHEL-GUID-91924322-1F68-4E47-9AC6-CAD8A3114E21" class="sect2">Trying Out Snippets</h2>
<div>
<p>Snippets of Java code are entered into JShell and immediately evaluated. Feedback about the results, actions performed, and any errors that occurred is shown. Use the examples in this section to give JShell a try.</p>
<p>Start JShell with the verbose option to get the maximum amount of feedback available:</p>
<pre dir="ltr">
% <span class="bold">jshell -v</span>
|  Welcome to JShell -- Version 9
|  For an introduction type: /help intro
</pre>
<p>Enter the following sample statement at the prompt, and review the output that is shown:</p>
<pre dir="ltr">
jshell&gt; <span class="bold">int x = 45</span>
x ==&gt; 45
|  created variable x : int
</pre>
<p>First, the result is shown. Read this as: the variable x has the value 45. Because you are in verbose mode, a description of what occurred is also shown. Informative messages start with a vertical bar. Notice that both the name and the type of the created variable are shown.</p>
<div class="infobox-note" id="GUID-91924322-1F68-4E47-9AC6-CAD8A3114E21__GUID-7DF90061-90F3-43F8-BAEB-D8203CCA39F7">
<p class="notep1">Note:</p>
Terminating semicolons are automatically added to the end of a complete snippet if not entered.</div>
<p>When an expression is entered that doesn't have a named variable, a scratch variable is created so that the value can be referenced later. The following example shows scratch values for an expression and for the results of a method. The example also shows the continuation prompt (<code class="codeph">...&gt;</code>) that is used when a snippet requires more than one line of input to complete:</p>
<pre dir="ltr">
jshell&gt; <span class="bold">2 + 2</span>
$3 ==&gt; 4
|  created scratch variable $3 : int

jshell&gt; <span class="bold">String twice(String s) {</span>
   ...&gt; <span class="bold">   return s + s;</span>
   ...&gt; <span class="bold">}</span>
|  created method twice(String)

jshell&gt; <span class="bold">twice("Ocean")</span>
$5 ==&gt; "OceanOcean"
|  created scratch variable $5 : String
</pre></div>
</div>
<div class="sect2"><a id="GUID-614373AD-8D94-462A-B05E-DFA35DF098C9"></a>
<h2 id="JSHEL-GUID-614373AD-8D94-462A-B05E-DFA35DF098C9" class="sect2">Changing Definitions</h2>
<div>
<p>As you experiment with code, you might find that the definition of a variable, method, or class isn&rsquo;t doing what you want it to do. The definition is easily changed by entering a new one, which overwrites the previous definition.</p>
<p>To change the definition of a variable, method, or class, simply enter a new definition. For example, the <code class="codeph">twice</code> method that was defined in <a href="snippets.htm#GUID-91924322-1F68-4E47-9AC6-CAD8A3114E21" title="Snippets of Java code are entered into JShell and immediately evaluated. Feedback about the results, actions performed, and any errors that occurred is shown. Use the examples in this section to give JShell a try.">Trying Out Snippets</a> gets a new definition in the following example:</p>
<pre dir="ltr">
jshell&gt; <span class="bold">String twice(String s) {</span>
   ...&gt; <span class="bold">   return "Twice:" + s;</span>
   ...&gt; <span class="bold">}</span>
|  modified method twice(String)

jshell&gt; <span class="bold">twice("thing")</span>
$7 ==&gt; "Twice:thing"
|  created scratch variable $7 : String
</pre>
<p>Notice that instead of showing <samp class="sysout">created method</samp> as before, the feedback shows <samp class="sysout">modified method</samp>. This message means that the definition changed, but the method has the same signature, and therefore all existing usages continue to be valid.</p>
<p>You can also change definitions in incompatible ways. The following example shows <code class="codeph">x</code> being changed from <code class="codeph">int</code> to <span class="apiname">String</span>:</p>
<pre dir="ltr">
jshell&gt; <span class="bold">int x = 45</span>
x ==&gt; 45
|  created variable x : int

jshell&gt; <span class="bold">String x</span>
x ==&gt; null
|  replaced variable x : String
|    update overwrote variable x : int
</pre>
<p>The type of the variable <code class="codeph">x</code> changed, and the feedback now shows <samp class="sysout">replaced</samp>.</p>
<div class="section">
<p class="subhead2">Changing the Level of Feedback</p>
<p>JShell was started in the verbose feedback mode, which provides a lot of commentary. You can set the amount and format of output with the <code class="codeph">/set feedback</code> command, for example <code class="codeph">/set feedback concise</code>. If you primarily use JShell by pasting from other windows, then you might prefer a feedback mode with no prompt and only error feedback. If so, then enter the <code class="codeph">/set feedback silent</code> command.</p>
</div>
<!-- class="section" --></div>
</div>
<div class="sect2"><a id="GUID-DA21BC6E-9C07-4C67-842F-BEEC7B8FF85F"></a>
<h2 id="JSHEL-GUID-DA21BC6E-9C07-4C67-842F-BEEC7B8FF85F" class="sect2">Forward References</h2>
<div>
<p>JShell accepts method definitions that reference methods, variables, or classes that aren&rsquo;t yet defined. This is done to support exploratory programming and because some forms of programming require it.</p>
<p>As an example, if you want to define a method for the volume of a sphere, then you can enter the following formula as the method <code class="codeph">volume</code>:</p>
<pre dir="ltr">
jshell&gt; <span class="bold">double volume(double radius) {</span>
   ...&gt; <span class="bold">   return 4.0 / 3.0 * PI * cube(radius);</span>
   ...&gt; <span class="bold">}</span>
|  created method volume(double), however, it cannot be invoked until variable PI, and method cube(double) are declared
</pre>
<p>JShell allows the definition but warns of what is yet to be defined. The definition can be referenced, but if execution is attempted, then it fails until all of the required elements are defined:</p>
<pre dir="ltr">
jshell&gt; <span class="bold">double PI = 3.1415926535</span>
PI ==&gt; 3.1415926535
|  created variable PI : double

jshell&gt; <span class="bold">volume(2)</span>
|  attempted to call method volume(double) which cannot be invoked until method cube(double) is declared

jshell&gt; <span class="bold">double cube(double x) { return x * x * x; }</span>
|  created method cube(double)
|    update modified method volume(double)

jshell&gt; <span class="bold">volume(2)</span>
$5 ==&gt; 33.510321637333334
|  created scratch variable $5 : double
</pre>
<p>With all of the definitions in place, the <code class="codeph">volume</code> method now works.</p>
<p>This method is now used to illustrate more about incompatible replacement. For example, to change the precision of <code class="codeph">PI</code>, enter the new value as shown in the following example:</p>
<pre dir="ltr">
jshell&gt; <span class="bold">BigDecimal PI = new BigDecimal("3.141592653589793238462643383")</span>
PI ==&gt; 3.141592653589793238462643383
|  replaced variable PI : BigDecimal
|    update modified method volume(double) which cannot be invoked until this error is corrected: 
|      bad operand types for binary operator '*'
|        first type:  double
|        second type: java.math.BigDecimal
|          return 4.0 / 3.0 * PI * cube(radius);
|                 ^------------^
|    update overwrote variable PI : double
</pre>
<p>The new definition of <code class="codeph">PI</code> is type-incompatible with the definition of <code class="codeph">volume()</code>. Because you are in verbose mode, update information is shown for other definitions affected by the change, which in this case describes the incompatibility. Notice that verbose mode is the only predefined feedback mode that displays update information. In other feedback modes, no warning is displayed until the code is executed. The purpose of this is to prevent an overload of updates. In all predefined modes, executing the <code class="codeph">volume()</code> method displays the issue:</p>
<pre dir="ltr">
jshell&gt; <span class="bold">volume(2)</span>
|  attempted to call method volume(double) which cannot be invoked until this error is corrected: 
|      bad operand types for binary operator '*'
|        first type:  double
|        second type: java.math.BigDecimal
|          return 4.0 / 3.0 * PI * cube(radius);
|                 ^------------^
</pre></div>
</div>
<div class="sect2"><a id="GUID-C265A167-24D4-435D-998F-230BD0E32149"></a>
<h2 id="JSHEL-GUID-C265A167-24D4-435D-998F-230BD0E32149" class="sect2">Exceptions</h2>
<div>
<p>In an exception backtrace, feedback identifies the snippet and the location within the snippet where the exception occurred.</p>
<p>The location within the code entered into JShell is displayed as <code class="codeph">#<span class="variable">ID</span>:<span class="variable">line-number</span></code>, where snippet <span class="variable">ID</span> is the number displayed by the <code class="codeph">/list</code> command, and <span class="variable">line-number</span> is the line number within the snippet. In the following example, the exception occurs in snippet 1, which is the <code class="codeph">divide()</code> method, on the second line of the method:</p>
<pre dir="ltr">
jshell&gt; <span class="bold">int divide(int x, int y) {</span>
   ...&gt; <span class="bold">return x / y;</span>
   ...&gt; <span class="bold">}</span>
|  created method divide(int,int)

jshell&gt; <span class="bold">divide(5, 0)</span>
|  java.lang.ArithmeticException thrown: / by zero
|        at divide (#1:2)
|        at (#2:1)
                             
jshell&gt; <span class="bold">/list</span>
                                                            
   1 : int divide(int x, int y) {
           return x / y;
       }
   2 : divide(5, 0)
</pre></div>
</div>
<div class="sect2"><a id="GUID-E24D9E84-C9E3-43DE-B14D-C9544A35E5FC"></a>
<h2 id="JSHEL-GUID-E24D9E84-C9E3-43DE-B14D-C9544A35E5FC" class="sect2">Tab Completion for Snippets</h2>
<div>
<p>When you enter snippets, use the Tab key to automatically complete the item. If the item can&rsquo;t be determined from what was entered, then possible options are provided.</p>
<p>For example, if you entered the <code class="codeph">volume</code> method from <a href="snippets.htm#GUID-DA21BC6E-9C07-4C67-842F-BEEC7B8FF85F" title="JShell accepts method definitions that reference methods, variables, or classes that aren&rsquo;t yet defined. This is done to support exploratory programming and because some forms of programming require it.">Forward References</a>, then you can enter the first few letters of the method name, and then press the Tab key to complete the entry:</p>
<pre dir="ltr">
jshell&gt; <span class="bold">vol&lt;Tab&gt;</span>
</pre>
<p>The input changes to the following:</p>
<pre dir="ltr">
jshell&gt; volume(
</pre>
<p>If the item can be completed in more than one way, the set of possibilities is displayed:</p>
<pre dir="ltr">
jshell&gt; <span class="bold">System.c&lt;Tab&gt;</span>
class                 clearProperty(        console()             currentTimeMillis()

jshell&gt; System.c
</pre>
<p>Any common characters are added to what you entered, and the cursor is placed at the end of the input so that more can be entered.</p>
<p>When you are at a method call's open parenthesis, pressing Tab shows completion possibilities with the parameter types:</p>
<pre dir="ltr">
jshell&gt; <span class="bold">"hello".startsWith(&lt;Tab&gt;</span>
Signatures:
boolean String.startsWith(String prefix, int toffset)
boolean String.startsWith(String prefix)

&lt;press tab again to see documentation&gt;

jshell&gt; "hello".startsWith(
</pre>
<p>Pressing Tab again shows a plain-text version of the documentation for the first method.</p>
<pre dir="ltr">
jshell&gt; <span class="bold">"hello".startsWith(&lt;Tab&gt;</span>
boolean String.startsWith(String prefix, int toffset)
Tests if the substring of this string beginning at the specified index starts with the
specified prefix.

Parameters:
prefix - the prefix.
toffset - where to begin looking in this string.

Returns:
true if the character sequence represented by the argument is a prefix of the substring of this
          object starting at index toffset ; false otherwise. The result is false if toffset is
          negative or greater than the length of this String object; otherwise the result is
          the same as the result of the expression
                    this.substring(toffset).startsWith(prefix)
                    

&lt;press tab to see next documentation&gt;

jshell&gt; "hello".startsWith(
</pre></div>
</div>
<div class="sect2"><a id="GUID-63DBC3E7-6EF2-498D-8638-94867ED10F76"></a>
<h2 id="JSHEL-GUID-63DBC3E7-6EF2-498D-8638-94867ED10F76" class="sect2">Snippet Transformation</h2>
<div>
<p>JShell makes it easy to import a needed class when it is first referenced and convert an expression to a variable declaration using keyboard shortcuts.</p>
<p>When you enter an identifier that isn&rsquo;t imported yet, press Shift+Tab i immediately after the identifier to see the options that enable you to add the import to your session:</p>
<pre dir="ltr">
jshell&gt; <span class="bold">new JFrame&lt;Shift+Tab i&gt;</span>
0: Do nothing
1: import: javax.swing.JFrame
Choice: <span class="bold">1</span>
Imported: javax.swing.JFrame

jshell&gt; new JFrame
</pre>
<p>Enter the number of the option you want. More than one import option could be provided.</p>
<p>You can convert an expression to a variable declaration by pressing Shift+Tab v after you enter the expression. The expression becomes the initial value of the variable declaration, and the type of the expression becomes the type of the variable. After you press Shift+Tab v, the cursor, which is indicated by a vertical bar (|) in the example, is placed in the line where you need to enter the variable name:</p>
<pre dir="ltr">
jshell&gt; <span class="bold">new JFrame("Demo") &lt;Shift+Tab v&gt;</span>
jshell&gt; JFrame | = new JFrame("Demo")
</pre>
<div class="infobox-note" id="GUID-63DBC3E7-6EF2-498D-8638-94867ED10F76__GUID-22780893-96F3-4070-9A63-F1B77DCDF47D">
<p class="notep1">Note:</p>
The expression must be valid or the transformation request is ignored. In the example, the import of <span class="apiname">JFrame</span> is required before the variable transformation.</div>
<p>To complete the previous example, enter the variable name <kbd class="userinput">frame</kbd> at the cursor and press Enter:</p>
<pre dir="ltr">
jshell&gt; <span class="bold">JFrame frame = new JFrame("Demo")</span>
frame ==&gt; javax.swing.JFrame[frame0,0,0,0x0,invalid,hidden, ... tPaneCheckingEnabled=true]
|  created variable frame : JFrame

jshell&gt;
</pre>
<p>Sometimes the result type of the expression isn&rsquo;t imported yet. In that case, Shift+Tab v offers to both import and create the variable, as shown in the following example:</p>
<pre dir="ltr">
jshell&gt; <span class="bold">frame.getGraphics() &lt;Shift+Tab v&gt;</span>
0: Do nothing
1: Create variable
2: import: java.awt.Graphics. Create variable
Choice: <span class="bold">2</span>
Imported: java.awt.Graphics

jshell&gt; Graphics | = frame.getGraphics()
</pre>
<p>To complete the previous example, enter the variable name <kbd class="userinput">gc</kbd> at the cursor and press Enter:</p>
<pre dir="ltr">
jshell&gt; <span class="bold">Graphics gc = frame.getGraphics()</span>
|  created variable gc : JFrame

jshell&gt;
</pre></div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment230">
<tr>
<td class="cellalignment242">
<table class="cellalignment245">
<tr>
<td class="cellalignment234"><a href="introduction-jshell.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment234"><a href="commands.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2017, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment244">
<table class="cellalignment233">
<tr>
<td class="cellalignment234"><a href="../index.html"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment234"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment234"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
