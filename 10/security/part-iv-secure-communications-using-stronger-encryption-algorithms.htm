<!DOCTYPE html>
<html lang="en-US" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<meta http-equiv="Content-Type" content="UTF-8" />
<title>Part IV : Secure Communications Using Stronger Encryption Algorithms</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)" />
<meta name="dcterms.created" content="2018-03-13T07:25:33Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Java Platform, Standard Edition Security Developer&rsquo;s Guide" />
<meta name="dcterms.identifier" content="E91076-01" />
<meta name="dcterms.isVersionOf" content="JSSEC" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1993, 2018, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="http://docs.oracle.com/javase/10/index.html" title="Home" type="text/html" />
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Prev" href="part-iii-deploying-single-sign-kerberos-environment.htm" title="Previous" type="text/html" />
<link rel="Next" href="part-v-secure-authentication-using-spnego-java-gss-mechanism.htm" title="Next" type="text/html" />
<link rel="alternate" href="JSSEC.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/fonts.css">
<link rel="stylesheet" href="../dcommon/css/foundation.css">
<link rel="stylesheet" href="../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css">
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
<script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-49820DF7-0DED-4C63-8DB8-89718501ADB1"></a> <span id="PAGE" style="display:none;">39/59</span> <!-- End Header -->
<h1 id="JSSEC-GUID-49820DF7-0DED-4C63-8DB8-89718501ADB1" class="sect1">Part IV : Secure Communications Using Stronger Encryption Algorithms</h1>
<div class="sect2"><a id="GUID-29FBA28F-5E45-47FF-AB3A-CEB60871D212"></a>
<h2 id="JSSEC-GUID-29FBA28F-5E45-47FF-AB3A-CEB60871D212" class="sect2">Exercise 7: Configuring to Use Stronger Encryption Algorithms in a Kerberos Environment, to Secure the Communication</h2>
<div>
<div class="section">
<p class="subhead2">Goal of This Exercise</p>
<p>The goal of this exercise is to learn how to use various Kerberos encryption algorithms to secure the communication. Java GSS/Kerberos provides a wide range of encryption algorithms, including AES256, AES128, 3DES, RC4-HMAC, and DES.</p>
<div class="infobox-note" id="GUID-29FBA28F-5E45-47FF-AB3A-CEB60871D212__GUID-534CA619-6431-4AF6-9EAF-9097B1DB13C7">
<p class="notep1">Note:</p>
DES-based encryption types are disabled by default.</div>
<p>The following is a list of all the encryption types supported by the Java GSS/Kerberos provider in Java SE:</p>
<ul style="list-style-type: disc;">
<li>
<p>AES256-CTS</p>
</li>
<li>
<p>AES128-CTS</p>
</li>
<li>
<p>RC4-HMAC</p>
</li>
<li>
<p>DES3-CBC-SHA1</p>
</li>
<li>
<p>DES-CBC-MD5</p>
</li>
<li>
<p>DES-CBC-CRC</p>
</li>
</ul>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Steps to Follow</p>
<ol>
<li>
<p>Configure the Key Distribution Center (KDC) and update the Kerberos database.</p>
<p>First, you need to update to use the KDC that supports the required Kerberos encryption types, such as the latest version of Solaris or the latest version of Kerberos from the MIT distribution. If you are using Active Directory on a Windows platform, the latest version also supports RC4-HMAC and AES encryption types.</p>
<p>You need to update the Kerberos database to generate the new keys with stronger encryption algorithms. By default, Solaris 10 KDC will generate the keys for all the above encryption types listed. You can now create a keytab that will include all the keys for all the above encryption types.</p>
<div class="infobox-note" id="GUID-29FBA28F-5E45-47FF-AB3A-CEB60871D212__GUID-91B456EC-8C26-4BBE-AE61-9229EAC72F4B">
<p class="notep1">Note:</p>
<p>If you want to use Windows 2000 KDC, you can configure to use the DES and RC4-HMAC encryption types that are available on Windows.</p>
</div>
</li>
<li>
<p>Edit the Kerberos configuration file (<a href="source-code-advanced-security-programming-java-se-authentication-secure-communication-and-single-sig.htm#GUID-40AF52E5-ECEA-4E5F-B0C1-35C150C7BB6E__KRB5.CONF-338B7967"><code>krb5.conf</code></a>).</p>
<p>You will need to edit the Kerberos configuration file in order to select the desired encryption types used. The required parameters that you will need to insert under the <code class="codeph">libdefaults</code> section of the Kerberos configuration file are listed below. For the purpose of this exercise, all the required entries have been added to a sample Kerberos configuration file included with the exercise, and the entries have been commented out. To enable the desired encryption type, you only need to uncomment the required entries.</p>
<ul style="list-style-type: disc;">
<li>
<p>To enable AES256-CTS encryption type, add the following:</p>
<pre dir="ltr">
[libdefaults]
default_tkt_enctypes = aes256-cts
default_tgs_enctypes = aes256-cts
permitted_enctypes = aes256-cts
</pre>
<div class="infobox-note" id="GUID-29FBA28F-5E45-47FF-AB3A-CEB60871D212__GUID-03ECE450-E293-48CF-BD38-E899E97BFACB">
<p class="notep1">Note:</p>
<p>Solaris 10 11/06 and earlier does not support AES256 by default. You will need to install the following packages: SUNWcry, SUNWcryr, SUNWcryptoint.</p>
</div>
</li>
<li>
<p>To enable AES128-CTS encryption type, add the following:</p>
<pre dir="ltr">
[libdefaults]
default_tkt_enctypes = aes128-cts
default_tgs_enctypes = aes128-cts
permitted_enctypes = aes128-cts
</pre></li>
<li>
<p>To enable RC4-HMAC encryption type, add the following:</p>
<pre dir="ltr">
[libdefaults]
default_tkt_enctypes = rc4-hmac
default_tgs_enctypes = rc4-hmac
permitted_enctypes = rc4-hmac
</pre></li>
<li>
<p>To enable DES3-CBC-SHA1 encryption type, add the following:</p>
<pre dir="ltr">
[libdefaults]
default_tkt_enctypes = des3-cbc-sha1
default_tgs_enctypes = des3-cbc-sha1
permitted_enctypes = des3-cbc-sha1
</pre></li>
</ul>
<div class="infobox-note" id="GUID-29FBA28F-5E45-47FF-AB3A-CEB60871D212__GUID-39D4BD8C-479F-40D7-81DB-7540B045316E">
<p class="notep1">Note:</p>
<ul style="list-style-type: disc;">
<li>
<p>If the above parameters are not added to the Kerberos configuration file, Solaris 10 11/06 and earlier will default to use AES128 enctype. If the exportable crypto packages have been installed, it will default to use AES256 enctype.</p>
</li>
<li>
<p>Destroy any pre-existing Kerberos TGT in the ticket cache from the previous exercise as follows:</p>
<pre dir="ltr">
% kdestroy
</pre></li>
</ul>
</div>
</li>
<li>
<p>Launch a new window and start the server using the updated <code>krb5.conf</code> as follows:</p>
<pre dir="ltr">
% java -Djava.security.auth.login.config=jaas-krb5.conf \
-Djava.security.krb5.conf=krb5.conf GSSServer
</pre></li>
<li>
<p>Run the client application using the updated <code>krb5.conf</code>. The <span class="apiname">GSSClient</span> class takes two parameters: the service name and the name of the server that the service is running on. For example, if the service is host running on the machine j1hol-001, use the following (provide a secure password when prompted):</p>
<pre dir="ltr">
% java -Djava.security.auth.login.config=jaas-krb5.conf \
-Djava.security.krb5.conf=krb5.conf \
GSSClient host j1hol-001
</pre></li>
</ol>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead2">Summary</p>
<p>In this exercise, you learned how to write a client-server application that uses Java GSS API to authenticate and communicate securely using stronger Kerberos encryption algorithms. You can enable Kerberos debugging (<code class="codeph">-Dsun.security.krb5.debug=true</code>), to obtain information about the Kerberos encryption type used.</p>
</div>
<!-- class="section" --></div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment455">
<tr>
<td class="cellalignment462">
<table class="cellalignment460">
<tr>
<td class="cellalignment459"><a href="part-iii-deploying-single-sign-kerberos-environment.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment459"><a href="part-v-secure-authentication-using-spnego-java-gss-mechanism.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1993, 2018, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment464">
<table class="cellalignment458">
<tr>
<td class="cellalignment459"><a href="http://docs.oracle.com/javase/10/index.html"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment459"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment459"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
