<!DOCTYPE html>
<html lang="en-US" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<meta http-equiv="Content-Type" content="UTF-8" />
<title>Java Authentication and Authorization Service (JAAS) Reference Guide</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)" />
<meta name="dcterms.created" content="2018-03-13T07:25:33Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Java Platform, Standard Edition Security Developer&rsquo;s Guide" />
<meta name="dcterms.identifier" content="E91076-01" />
<meta name="dcterms.isVersionOf" content="JSSEC" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1993, 2018, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="http://docs.oracle.com/javase/10/index.html" title="Home" type="text/html" />
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Prev" href="java-authentication-and-authorization-service-jaas1.htm" title="Previous" type="text/html" />
<link rel="Next" href="appendix-b-jaas-login-configuration-file.htm" title="Next" type="text/html" />
<link rel="alternate" href="JSSEC.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/fonts.css">
<link rel="stylesheet" href="../dcommon/css/foundation.css">
<link rel="stylesheet" href="../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css">
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
<script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-2A935F5E-0803-411D-B6BC-F8C64D01A25C"></a> <span id="PAGE" style="display:none;">15/59</span> <!-- End Header -->
<h1 id="JSSEC-GUID-2A935F5E-0803-411D-B6BC-F8C64D01A25C" class="sect1">Java Authentication and Authorization Service (JAAS) Reference Guide</h1>
<div>
<p>JAAS can be used for two purposes:</p>
<ul style="list-style-type: disc;">
<li>for <span class="variable">authentication</span> of users, to reliably and securely determine who is currently executing Java code, regardless of whether the code is running as an application, an applet, a bean, or a servlet; and</li>
<li>for <span class="variable">authorization</span> of users to ensure they have the access control rights (permissions) required to do the actions performed.</li>
</ul>
<p>JAAS implements a Java version of the standard Pluggable Authentication Module (PAM) framework.</p>
<p>Traditionally Java has provided codesource-based access controls (access controls based on <span class="variable">where</span> the code originated from and <span class="variable">who signed</span> the code). It lacked, however, the ability to additionally enforce access controls based on <span class="variable">who runs</span> the code. JAAS provides a framework that augments the Java security architecture with such support.</p>
<p>JAAS authentication is performed in a <span class="variable">pluggable</span> fashion. This permits applications to remain independent from underlying authentication technologies. New or updated authentication technologies can be plugged under an application without requiring modifications to the application itself. Applications enable the authentication process by instantiating a <a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/login/LoginContext.html" target="_blank"><code class="codeph">LoginContext</code></a> object, which in turn references a <a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/login/Configuration.html" target="_blank"><code class="codeph">Configuration</code></a> to determine the authentication technology or technologies, or <a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/spi/LoginModule.html" target="_blank"><code class="codeph">LoginModule</code></a>(s), to be used in performing the authentication. Typical <code class="codeph">LoginModule</code>s may prompt for and verify a user name and password. Others may read and verify a voice or fingerprint sample.</p>
<p>Once the user or service executing the code has been authenticated, the JAAS authorization component works in conjunction with the core Java SE access control model to protect access to sensitive resources. Access control decisions are based both on the executing code's <code class="codeph">CodeSource</code> <span class="variable">and</span> on the user or service running the code, who is represented by a <a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/Subject.html" target="_blank"><code class="codeph">Subject</code></a> object. The <code class="codeph">Subject</code> is updated by a <code class="codeph">LoginModule</code> with relevant <a href="https://docs.oracle.com/javase/10/docs/api/java/security/Principal.html" target="_blank"><code class="codeph">Principal</code>s</a> and credentials if authentication succeeds.</p>
</div>
<div class="sect2"><a id="GUID-31AC2288-E4E8-42D9-821E-85385F1F2FE8"></a>
<h2 id="JSSEC-GUID-31AC2288-E4E8-42D9-821E-85385F1F2FE8" class="sect2">Who Should Read This Document</h2>
<div>
<p>This document is intended for experienced developers who require the ability to design applications constrained by a <code class="codeph">CodeSource</code>-based and <code class="codeph">Subject</code>-based security model. It is also intended to be read by <span class="apiname">LoginModule</span> developers (developers implementing an authentication technology) prior to reading the <a href="java-authentication-and-authorization-service-jaas-loginmodule-developers-guide1.htm#GUID-CB46C30D-FFF1-466F-B2F5-6DE0BD5DA43A">Java Authentication and Authorization Service (JAAS): LoginModule Developer's Guide</a>.</p>
<p>You may wish to first read <a href="jaas-authentication-tutorial.htm#GUID-BFEBDB00-9826-499C-A20F-E9463883DED4">JAAS Authentication Tutorial</a> and <a href="jaas-authorization-tutorial.htm#GUID-D43CF965-8A5F-4A23-A2AF-F41DD5F8B411">JAAS Authorization Tutorial</a> to get an overview of how to use JAAS and to see sample code in action, and then return to this document for further information.</p>
</div>
</div>
<div class="sect2"><a id="GUID-11885DA7-0D17-4756-B193-3CC9376B1225"></a>
<h2 id="JSSEC-GUID-11885DA7-0D17-4756-B193-3CC9376B1225" class="sect2">Related Documentation</h2>
<div>
<p>This document assumes you have already read the following:</p>
<ul style="list-style-type: disc;">
<li><a href="java-se-platform-security-architecture.htm#GUID-D6C53B30-01F9-49F1-9F61-35815558422B" title="This section explains what privileged code is and what it is used for. It also shows you how to use the doPrivileged API.This section describes the doPrivileged API and the use of the privileged feature.If you are using a lambda expression or anonymous inner class, then any local variables you access must be final or effectively final.If the action performed in your run method could throw a checked exception (one that must be listed in the throws clause of a method), then you need to use the PrivilegedExceptionAction interface instead of the PrivilegedAction interface.The typical use case of the doPrivileged method is to enable the method that invokes it to perform one or more actions that require permission checks without requiring the callers of the current method to have all the necessary permissions.When coding the current method, you want to temporarily extend the permission of the calling method to perform an action.Marking code as privileged enables a piece of trusted code to temporarily enable access to more resources than are available directly to the code that called it.The doPrivileged method can be invoked reflectively using the java.lang.reflect.Method.invoke method.">Java SE Platform Security Architecture</a></li>
<li><a href="https://docs.oracle.com/javase/tutorial/security/index.html" target="_blank">Java SE Security Tutorial</a></li>
</ul>
<p>A supplement to this guide is the <a href="java-authentication-and-authorization-service-jaas-loginmodule-developers-guide1.htm#GUID-CB46C30D-FFF1-466F-B2F5-6DE0BD5DA43A">JAAS LoginModule Developer's Guide</a>, intended for experienced programmers who require the ability to write a <a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/spi/LoginModule.html" target="_blank"><code class="codeph">LoginModule</code></a> implementing an authentication technology.</p>
<p>The following <span class="bold">tutorials</span> for JAAS authentication and authorization can be run by everyone:</p>
<ul style="list-style-type: disc;">
<li><a href="jaas-authentication-tutorial.htm#GUID-BFEBDB00-9826-499C-A20F-E9463883DED4">JAAS Authentication Tutorial</a></li>
<li><a href="jaas-authorization-tutorial.htm#GUID-D43CF965-8A5F-4A23-A2AF-F41DD5F8B411">JAAS Authorization Tutorial</a></li>
</ul>
<p>Similar tutorials for JAAS authentication and authorization, but which demonstrate the use of a Kerberos LoginModule and thus which require a Kerberos installation, can be found at</p>
<ul style="list-style-type: disc;">
<li><a href="jaas-authentication.htm#GUID-0C6EB04B-D203-4688-A3E2-A7D442334623">JAAS Authentication</a></li>
<li><a href="jaas-authorization.htm#GUID-69241059-CCD0-49F6-838F-DDC752F9F19F">JAAS Authorization</a></li>
</ul>
<p>These two tutorials are a part of <a href="introduction-jaas-and-java-gss-api-tutorials1.htm">Introduction to JAAS and Java GSS-API Tutorials</a> that utilize Kerberos as the underlying technology for authentication and secure communication.</p>
</div>
</div>
<div class="sect2"><a id="GUID-D679A98F-C706-4FE2-9027-39A520BA0FCB"></a>
<h2 id="JSSEC-GUID-D679A98F-C706-4FE2-9027-39A520BA0FCB" class="sect2">Core Classes and Interfaces</h2>
<div>
<p>The JAAS-related core classes and interfaces can be broken into three categories: Common, Authentication, and Authorization.</p>
</div>
<div class="sect3"><a id="GUID-2CDC988F-D462-4CEA-9243-CC74B000327F"></a>
<h3 id="JSSEC-GUID-2CDC988F-D462-4CEA-9243-CC74B000327F" class="sect3">Common Classes</h3>
<div>
<p>Common classes are those shared by both the JAAS authentication and authorization components.</p>
<p>The key JAAS class is <a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/Subject.html" target="_blank"><code class="codeph">javax.security.auth.Subject</code></a>, which represents a grouping of related information for a single entity such as a person. It encompasses the entity's <a href="java-authentication-and-authorization-service-jaas-reference-guide.htm#GUID-8FAF9739-CD62-4A47-9582-884DBF3081F0">Principals</a>, public credentials, and private credentials.</p>
<p>Note that the <code class="codeph">java.security.Principal</code> interface is used to represent a Principal. Also note that a credential, as defined by JAAS, may be any Object.</p>
</div>
<div class="sect4"><a id="GUID-804BDE80-9E66-421C-BF0A-A96FBE7DE4E3"></a>
<h4 id="JSSEC-GUID-804BDE80-9E66-421C-BF0A-A96FBE7DE4E3" class="sect4">Subject</h4>
<div>
<p>To authorize access to resources, applications first need to authenticate the source of the request. The JAAS framework defines the term <span class="italic">subject</span> to represent the source of a request. A subject may be any entity, such as a person or a service. Once the subject is authenticated, a <a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/Subject.html" target="_blank"><code class="codeph">javax.security.auth.Subject</code></a> is populated with associated identities, or <a href="java-authentication-and-authorization-service-jaas-reference-guide.htm#GUID-8FAF9739-CD62-4A47-9582-884DBF3081F0">Principals</a>. A <code class="codeph">Subject</code> may have many <code class="codeph">Principal</code>s. For example, a person may have a name <code class="codeph">Principal</code> ("John Doe") and a SSN <code class="codeph">Principal</code> ("123-45-6789"), which distinguish it from other subjects.</p>
<p>A <code class="codeph">Subject</code> may also own security-related attributes, which are referred to as <span class="variable">credentials</span>; see the section <a href="java-authentication-and-authorization-service-jaas-reference-guide.htm#GUID-9381520E-7A13-4087-BA26-C6CB8BE4A437">Credentials</a>. Sensitive credentials that require special protection, such as private cryptographic keys, are stored within a private credential <code class="codeph">Set</code>. Credentials intended to be shared, such as public key certificates, are stored within a public credential <code class="codeph">Set</code>. Different permissions (described below) are required to access and modify the different credential <code class="codeph">Set</code>s.</p>
<p>Subjects are created using these constructors:</p>
<pre dir="ltr">
    public Subject();

    public Subject(boolean readOnly, Set principals,
                   Set pubCredentials, Set privCredentials);
</pre>
<p>The first constructor creates a <code class="codeph">Subject</code> with empty (non-null) <code class="codeph">Set</code>s of <code class="codeph">Principal</code>s and credentials. The second constructor creates a <code class="codeph">Subject</code> with the specified <code class="codeph">Set</code>s of <code class="codeph">Principal</code>s and credentials. It also has a boolean argument which can be used to make the <code class="codeph">Subject</code> read-only. In a read-only <code class="codeph">Subject</code>, the <code class="codeph">Principal</code> and credential <code class="codeph">Set</code>s are immutable.</p>
<p>An application writer does not have to instantiate a <code class="codeph">Subject</code>. If the application instantiates a <code class="codeph">LoginContext</code> and does not pass a <code class="codeph">Subject</code> to the <code class="codeph">LoginContext</code> constructor, the <code class="codeph">LoginContext</code> instantiates a new empty <code class="codeph">Subject</code>. See the <a href="java-authentication-and-authorization-service-jaas-reference-guide.htm#GUID-164692CF-6790-488C-BF86-39F7C5CF0F5A">LoginContext</a> section.</p>
<p>If a <code class="codeph">Subject</code> was not instantiated to be in a read-only state, it can be set read-only by calling the following method:</p>
<pre dir="ltr">
    public void setReadOnly();
</pre>
<p>A <code class="codeph">javax.security.auth.AuthPermission</code> with target "setReadOnly" is required to invoke this method. Once in a read-only state, any attempt to add or remove <code class="codeph">Principal</code>s or credentials will result in an <code class="codeph">IllegalStateException</code> being thrown. The following method may be called to test a <code class="codeph">Subject</code>'s read-only state:</p>
<pre dir="ltr">
    public boolean isReadOnly();
</pre>
<p>To retrieve the <code class="codeph">Principal</code>s associated with a Subject, two methods are available:</p>
<pre dir="ltr">
    public Set getPrincipals();
    public Set getPrincipals(Class c);
</pre>
<p>The first method returns all <code class="codeph">Principal</code>s contained in the <code class="codeph">Subject</code>, while the second method only returns those <code class="codeph">Principal</code>s that are an instance of the specified Class <code class="codeph">c</code>, or an instance of a subclass of Class <code class="codeph">c</code>. An empty set will be returned if the <code class="codeph">Subject</code> does not have any associated <code class="codeph">Principal</code>s.</p>
<p>To retrieve the public credentials associated with a <code class="codeph">Subject</code>, these methods are available:</p>
<pre dir="ltr">
    public Set getPublicCredentials();
    public Set getPublicCredentials(Class c);
</pre>
<p>The behavior of these methods is similar to that for the <code class="codeph">getPrincipals</code> methods, except in this case the public credentials are being obtained.</p>
<p>To access private credentials associated with a <code class="codeph">Subject</code>, the following methods are available:</p>
<pre dir="ltr">
    public Set getPrivateCredentials();
    public Set getPrivateCredentials(Class c);
</pre>
<p>The behavior of these methods is similar to that for the <code class="codeph">getPrincipals</code> and <code class="codeph">getPublicCredentials</code> methods.</p>
<p>To modify or operate upon a <code class="codeph">Subject</code>'s <code class="codeph">Principal</code><code class="codeph">Set</code>, public credential <code class="codeph">Set</code>, or private credential <code class="codeph">Set</code>, callers use the methods defined in the <a href="https://docs.oracle.com/javase/10/docs/api/java/util/Set.html" target="_blank"><code class="codeph">java.util.Set</code></a> class. The following example demonstrates this:</p>
<pre dir="ltr">
    Subject subject;
    Principal principal;
    Object credential;

    . . .

    // add a Principal and credential to the Subject
    subject.getPrincipals().add(principal);
    subject.getPublicCredentials().add(credential);
</pre>
<p>Note: An <code class="codeph">AuthPermission</code> with target "modifyPrincipals", "modifyPublicCredentials", or "modifyPrivateCredentials" is required to modify the respective <code class="codeph">Set</code>s. Also note that only the sets returned via the <code class="codeph">getPrincipals()</code>, <code class="codeph">getPublicCredentials()</code>, and <code class="codeph">getPrivateCredentials()</code> methods with no arguments are backed by the <code class="codeph">Subject</code>'s respective internal sets. Therefore any modification to the returned set affects the internal sets as well. The sets returned via the <code class="codeph">getPrincipals(Class c)</code>, <code class="codeph">getPublicCredentials(Class c)</code>, and <code class="codeph">getPrivateCredentials(Class c)</code> methods are not backed by the <code class="codeph">Subject</code>'s respective internal sets. A new set is created and returned for each such method invocation. Modifications to these sets will not affect the <code class="codeph">Subject</code>'s internal sets.</p>
<p>In order to iterate through a Set of private credentials, you need a <code class="codeph">javax.security.auth.PrivateCredentialPermission</code> to access each credential. See the <a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/PrivateCredentialPermission.html" target="_blank"><code class="codeph">PrivateCredentialPermission</code></a> API documentation for further information.</p>
<p>A <code class="codeph">Subject</code> may be associated with an <code class="codeph">AccessControlContext</code> (see the <code class="codeph">doAs</code> and <code class="codeph">doAsPrivileged</code> method descriptions below). The following method returns the <code class="codeph">Subject</code> associated with the specified <code class="codeph">AccessControlContext</code>, or <code class="codeph">null</code> if no <code class="codeph">Subject</code> is associated with the specified <code class="codeph">AccessControlContext</code>.</p>
<pre dir="ltr">
    public static Subject getSubject(final AccessControlContext acc);
</pre>
<p>An <code class="codeph">AuthPermission</code> with target "getSubject" is required to call <code class="codeph">Subject.getSubject</code>.</p>
<p>The <code class="codeph">Subject</code> class also includes the following methods inherited from <code class="codeph">java.lang.Object</code>.</p>
<pre dir="ltr">
    public boolean equals(Object o);
    public String toString();
    public int hashCode();
</pre></div>
<div class="sect5"><a id="GUID-FA47090A-D270-4E4E-A5F6-752E1A48DC4C"></a>
<h5 id="JSSEC-GUID-FA47090A-D270-4E4E-A5F6-752E1A48DC4C" class="sect5">The doAs methods for performing an action as a particular Subject</h5>
<div>
<p>The following static methods may be called to perform an action as a particular <code class="codeph">Subject</code>:</p>
<pre dir="ltr">
    public static Object
        doAs(final Subject subject,
             final java.security.PrivilegedAction action);

    public static Object
        doAs(final Subject subject,
             final java.security.PrivilegedExceptionAction action)
             throws java.security.PrivilegedActionException;
</pre>
<p>Both methods first associate the specified <code class="codeph">subject</code> with the current Thread's <code class="codeph">AccessControlContext</code>, and then execute the <code class="codeph">action</code>. This achieves the effect of having the <code class="codeph">action</code> run as the <code class="codeph">subject</code>. The first method can throw runtime exceptions but normal execution has it returning an Object from the <code class="codeph">run</code> method of its <code class="codeph">action</code> argument. The second method behaves similarly except that it can throw a checked exception from its <code class="codeph">PrivilegedExceptionAction run</code> method. An <code class="codeph">AuthPermission</code> with target "doAs" is required to call the <code class="codeph">doAs</code> methods.</p>
</div>
</div>
<div class="sect5"><a id="GUID-3BF4EEC2-3953-4331-955B-C34EF2514F36"></a>
<h5 id="JSSEC-GUID-3BF4EEC2-3953-4331-955B-C34EF2514F36" class="sect5">Subject.doAs Example</h5>
<div>
<p>Here is an example utilizing the first <code class="codeph">doAs</code> method. Assume that someone named "Bob" has been authenticated by a <code class="codeph">LoginContext</code> (see the <a href="java-authentication-and-authorization-service-jaas-reference-guide.htm#GUID-164692CF-6790-488C-BF86-39F7C5CF0F5A">LoginContext</a>) and as a result a <code class="codeph">Subject</code> was populated with a <code class="codeph">Principal</code> of class <code class="codeph">com.ibm.security.Principal</code>, and that <code class="codeph">Principal</code> has the name "BOB". Also assume that a <span class="apiname">SecurityManager</span> has been installed, and that the following exists in the access control policy (see <a href="java-authentication-and-authorization-service-jaas-reference-guide.htm#GUID-66990EE6-1213-4BF7-AC43-A4C75AE6746D">Policy</a> for more details on the policy file).</p>
<pre dir="ltr">
    // grant "BOB" permission to read the file "foo.txt"
    grant Principal com.ibm.security.Principal "BOB" {
        permission java.io.FilePermission "foo.txt", "read";
    };
</pre>
<p>Here is the sample application code:</p>
<pre dir="ltr">
    class ExampleAction implements java.security.PrivilegedAction {
        public Object run() {
            java.io.File f = new java.io.File("foo.txt");

            // the following call invokes a security check
            if (f.exists()) {
                System.out.println("File foo.txt exists");
            }
            return null;
        }
    }

    public class Example1 {
        public static void main(String[] args) {

            // Authenticate the subject, "BOB".
            // This process is described in the
            // <a href="java-authentication-and-authorization-service-jaas-reference-guide.htm#GUID-164692CF-6790-488C-BF86-39F7C5CF0F5A">LoginContext</a> class.

            Subject bob;
            // Set bob to the Subject created during the
            // authentication process

            // perform "ExampleAction" as "BOB"
            Subject.doAs(bob, new ExampleAction());
        }
    }
</pre>
<p>During execution, <code class="codeph">ExampleAction</code> will encounter a security check when it makes a call to <code class="codeph">f.exists()</code>. However, since <code class="codeph">ExampleAction</code> is running as "BOB", and the policy (above) grants the necessary <code class="codeph">FilePermission</code> to "BOB", the <code class="codeph">ExampleAction</code> will pass the security check. If the <code class="codeph">grant</code> statement in the policy is altered (adding an incorrect <code class="codeph">CodeBase</code> or changing the <code class="codeph">Principal</code> to "MOE", for example), then a <code class="codeph">SecurityException</code> will be thrown.</p>
</div>
</div>
<div class="sect5"><a id="GUID-7CBADEEE-D62F-4AA7-BD75-78F79C72067A"></a>
<h5 id="JSSEC-GUID-7CBADEEE-D62F-4AA7-BD75-78F79C72067A" class="sect5">The doAsPrivileged methods</h5>
<div>
<p>The following methods also perform an action as a particular <code class="codeph">Subject</code>.</p>
<pre dir="ltr">
    public static Object doAsPrivileged(
        final Subject subject,
        final java.security.PrivilegedAction action,
        final java.security.AccessControlContext acc);

    public static Object doAsPrivileged(
        final Subject subject,
        final java.security.PrivilegedExceptionAction action,
        final java.security.AccessControlContext acc)
        throws java.security.PrivilegedActionException;
</pre>
<p>An <code class="codeph">AuthPermission</code> with target "doAsPrivileged" is required to call the <code class="codeph">doAsPrivileged</code> methods.</p>
</div>
</div>
<div class="sect5"><a id="GUID-97198A0C-B488-4D24-A242-CAFA8F70DFA5"></a>
<h5 id="JSSEC-GUID-97198A0C-B488-4D24-A242-CAFA8F70DFA5" class="sect5">doAs versus doAsPrivileged</h5>
<div>
<p>The <code class="codeph">doAsPrivileged</code> methods behave exactly the same as the <code class="codeph">doAs</code> methods, except that instead of associating the provided <code class="codeph">Subject</code> with the current Thread's <code class="codeph">AccessControlContext</code>, they use the provided <code class="codeph">AccessControlContext</code>. In this way, actions can be restricted by <code class="codeph">AccessControlContext</code>s different from the current one.</p>
<p>An <code class="codeph">AccessControlContext</code> contains information about all the code executed since the <code class="codeph">AccessControlContext</code> was instantiated, including the code location and the permissions the code is granted by the policy. In order for an access control check to succeed, the policy must grant each code item referenced by the <code class="codeph">AccessControlContext</code> the required permissions.</p>
<p>If the <code class="codeph">AccessControlContext</code> provided to <code class="codeph">doAsPrivileged</code> is <code class="codeph">null</code>, then the action is not restricted by a separate <code class="codeph">AccessControlContext</code>. One example where this may be useful is in a server environment. A server may authenticate multiple incoming requests and perform a separate <code class="codeph">doAs</code> operation for each request. To start each <code class="codeph">doAs</code> action "fresh," and without the restrictions of the current server <code class="codeph">AccessControlContext</code>, the server can call <code class="codeph">doAsPrivileged</code> and pass in a <code class="codeph">null</code><code class="codeph">AccessControlContext</code>.</p>
</div>
</div>
</div>
<div class="sect4"><a id="GUID-8FAF9739-CD62-4A47-9582-884DBF3081F0"></a>
<h4 id="JSSEC-GUID-8FAF9739-CD62-4A47-9582-884DBF3081F0" class="sect4">Principals</h4>
<div>
<p>As mentioned previously, once a <span class="apiname">Subject</span> is authenticated, it is populated with associated identities, or <span class="apiname">Principal</span>s. A <span class="apiname">Subject</span> may have many <span class="apiname">Principals</span>. For example, a person may have a name <span class="apiname">Principal</span> ("John Doe") and an SSN <span class="apiname">Principal</span> ("123-45-6789"), which distinguish it from other <span class="apiname">Subject</span>s. A <span class="apiname">Principal</span> must implement the <a href="https://docs.oracle.com/javase/10/docs/api/java/security/Principal.html" target="_blank"><span class="apiname">java.security.Principal</span></a> and <a href="https://docs.oracle.com/javase/10/docs/api/java/io/Serializable.html" target="_blank"><span class="apiname">java.io.Serializable</span></a> interfaces. See <a href="java-authentication-and-authorization-service-jaas-reference-guide.htm#GUID-804BDE80-9E66-421C-BF0A-A96FBE7DE4E3">Subject</a> for information about ways to update the <span class="apiname">Principal</span>s associated with a <span class="apiname">Subject</span>.</p>
</div>
</div>
<div class="sect4"><a id="GUID-9381520E-7A13-4087-BA26-C6CB8BE4A437"></a>
<h4 id="JSSEC-GUID-9381520E-7A13-4087-BA26-C6CB8BE4A437" class="sect4">Credentials</h4>
<div>
<p>In addition to associated Principals, a Subject may own security-related attributes, which are referred to as credentials. A credential may contain information used to authenticate the subject to new services. Such credentials include passwords, Kerberos tickets, and public key certificates. Credentials might also contain data that simply enables the subject to perform certain activities. Cryptographic keys, for example, represent credentials that enable the subject to sign or encrypt data. Public and private credential classes are not part of the core JAAS class library. Any class, therefore, can represent a credential.</p>
<p>Public and private credential classes are not part of the core JAAS class library. Developers, however, may elect to have their credential classes implement two interfaces related to credentials: <code class="codeph">Refreshable</code> and <code class="codeph">Destroyable</code>.</p>
</div>
<div class="sect5"><a id="GUID-9FA5AFF7-92A9-4F26-9266-71B8871C3A86"></a>
<h5 id="JSSEC-GUID-9FA5AFF7-92A9-4F26-9266-71B8871C3A86" class="sect5">Refreshable</h5>
<div>
<p>The <a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/Refreshable.html" target="_blank"><code class="codeph">javax.security.auth.Refreshable</code></a> <span class="bold">interface</span> provides the capability for a credential to refresh itself. For example, a credential with a particular time-restricted lifespan may implement this interface to allow callers to refresh the time period for which it is valid. The interface has two abstract methods:</p>
<pre dir="ltr">
    boolean isCurrent();
</pre>
<p>This method determines whether the credential is current or valid.</p>
<pre dir="ltr">
    void refresh() throws RefreshFailedException;
</pre>
<p>This method updates or extends the validity of the credential. The method implementation should perform an</p>
<p><code class="codeph">AuthPermission("refreshCredential")</code></p>
<p>security check to ensure the caller has permission to refresh the credential.</p>
</div>
</div>
<div class="sect5"><a id="GUID-B5587785-F349-46FA-8D8C-AB7EA09AC98C"></a>
<h5 id="JSSEC-GUID-B5587785-F349-46FA-8D8C-AB7EA09AC98C" class="sect5">Destroyable</h5>
<div>
<p>The <a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/Destroyable.html" target="_blank"><code class="codeph">javax.security.auth.Destroyable</code></a> <span class="bold">interface</span> provides the capability of destroying the contents within a credential. The interface has two abstract methods:</p>
<pre dir="ltr">
    boolean isDestroyed();
</pre>
<p>Determines whether the credential has been destroyed.</p>
<pre dir="ltr">
    void destroy() throws DestroyFailedException;
</pre>
<p>Destroys and clears the information associated with this credential. Subsequent calls to certain methods on this credential will result in an <code class="codeph">IllegalStateException</code> being thrown. The method implementation should perform an <code class="codeph">AuthPermission("destroyCredential")</code> security check to ensure the caller has permission to destroy the credential.</p>
</div>
</div>
</div>
</div>
<div class="sect3"><a id="GUID-6A19B0FB-39F9-4917-A3B1-72E4387BA021"></a>
<h3 id="JSSEC-GUID-6A19B0FB-39F9-4917-A3B1-72E4387BA021" class="sect3">Authentication Classes and Interfaces</h3>
<div>
<p>Authentication represents the process by which the identity of a subject is verified, and must be performed in a secure fashion; otherwise a perpetrator may impersonate others to gain access to a system. Authentication typically involves the subject demonstrating some form of evidence to prove its identity. Such evidence may be information only the subject would likely know or have (such as a password or fingerprint), or it may be information only the subject could produce (such as signed data using a private key).</p>
<p>To authenticate a subject (user or service), the following steps are performed:</p>
<ol>
<li>An application instantiates a <code class="codeph">LoginContext</code>.</li>
<li>The <code class="codeph">LoginContext</code> consults a <a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/login/Configuration.html" target="_blank"><code class="codeph">Configuration</code></a> to load all of the <code class="codeph">LoginModule</code>s configured for that application.</li>
<li>The application invokes the <code class="codeph">LoginContext</code>'s <code class="codeph">login</code> method.</li>
<li>The <code class="codeph">login</code> method invokes all of the loaded <code class="codeph">LoginModule</code>s. Each <code class="codeph">LoginModule</code> attempts to authenticate the subject. Upon success, <code class="codeph">LoginModule</code>s associate relevant <code class="codeph">Principal</code>s and credentials with a <code class="codeph">Subject</code> object that represents the subject being authenticated.</li>
<li>The <code class="codeph">LoginContext</code> returns the authentication status to the application.</li>
<li>If authentication succeeded, the application retrieves the <code class="codeph">Subject</code> from the <code class="codeph">LoginContext</code>.</li>
</ol>
<p>The authentication classes are described below.</p>
</div>
<div class="sect4"><a id="GUID-164692CF-6790-488C-BF86-39F7C5CF0F5A"></a>
<h4 id="JSSEC-GUID-164692CF-6790-488C-BF86-39F7C5CF0F5A" class="sect4">LoginContext</h4>
<div>
<p>The <a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/login/LoginContext.html" target="_blank"><code class="codeph">javax.security.auth.login.LoginContext</code></a> class provides the basic methods used to authenticate subjects, and provides a way to develop an application independent of the underlying authentication technology. The <code class="codeph">LoginContext</code> consults a <a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/login/Configuration.html" target="_blank"><code class="codeph">Configuration</code></a> to determine the authentication services, or <a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/spi/LoginModule.html" target="_blank"><code class="codeph">LoginModule</code>(s)</a>, configured for a particular application. Therefore, different <code class="codeph">LoginModule</code>s can be plugged in under an application without requiring any modifications to the application itself.</p>
<p><code class="codeph">LoginContext</code> offers four constructors from which to choose:</p>
<pre dir="ltr">
    public LoginContext(String name) throws LoginException;

    public LoginContext(String name, Subject subject) throws LoginException;

    public LoginContext(String name, CallbackHandler callbackHandler)
           throws LoginException

    public LoginContext(String name, Subject subject,
           CallbackHandler callbackHandler) throws LoginException
</pre>
<p>All of the constructors share a common parameter: name. This argument is used by the <code class="codeph">LoginContext</code> as an index into the login <code class="codeph">Configuration</code> to determine which <code class="codeph">LoginModule</code>s are configured for the application instantiating the <code class="codeph">LoginContext</code>. Constructors that do not take a Subject as an input parameter instantiate a new <code class="codeph">Subject</code>. Null inputs are disallowed for all constructors. Callers require an <code class="codeph">AuthPermission</code> with target "createLoginContext.<span class="variable">&lt;name&gt;</span>" to instantiate a <code class="codeph">LoginContext</code>. Here, <span class="variable">&lt;name&gt;</span> refers to the name of the login configuration entry that the application references in the name parameter for the <code class="codeph">LoginContext</code> instantiation.</p>
<p>See <a href="java-authentication-and-authorization-service-jaas-reference-guide.htm#GUID-1018AB86-8912-4C00-8717-2FA2B54A4866">CallbackHandler</a> for information on what a <code class="codeph">CallbackHandler</code> is and when you may need one.</p>
<p>Actual authentication occurs with a call to the following method:</p>
<pre dir="ltr">
    public void login() throws LoginException;
</pre>
<p>When <code class="codeph">login</code> is invoked, all of the configured <code class="codeph">LoginModule</code>s are invoked to perform the authentication. If the authentication succeeded, the <code class="codeph">Subject</code> (which may now hold <code class="codeph">Principal</code>s, public credentials, and private credentials) can be retrieved by using the following method:</p>
<pre dir="ltr">
     public Subject getSubject();
</pre>
<p>To logout a <code class="codeph">Subject</code> and remove its authenticated <code class="codeph">Principals</code> and credentials, the following method is provided:</p>
<pre dir="ltr">
    public void logout() throws LoginException;
</pre>
<p>The following code sample demonstrates the calls necessary to authenticate and logout a Subject:</p>
<pre dir="ltr">
    // let the LoginContext instantiate a new Subject
    LoginContext lc = new LoginContext("entryFoo");
    try {
        // authenticate the Subject
        lc.login();
        System.out.println("authentication successful");

        // get the authenticated Subject
        Subject subject = lc.getSubject();

        ...

        // all finished -- logout
        lc.logout();
    } catch (LoginException le) {
        System.err.println("authentication unsuccessful: " +
            le.getMessage());
    }
</pre></div>
</div>
<div class="sect4"><a id="GUID-0FDBE77C-01C3-4A98-9925-4F8D2E260118"></a>
<h4 id="JSSEC-GUID-0FDBE77C-01C3-4A98-9925-4F8D2E260118" class="sect4">LoginModule</h4>
<div>
<p>The <a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/spi/LoginModule.html" target="_blank"><code class="codeph">LoginModule</code></a> <span class="bold">interface</span> gives developers the ability to implement different kinds of authentication technologies that can be plugged in under an application. For example, one type of <code class="codeph">LoginModule</code> may perform a user name/password-based form of authentication. Other <code class="codeph">LoginModule</code>s may interface to hardware devices such as smart cards or biometric devices.</p>
<p>Note: If you are an application writer, you do not need to understand the workings of <code class="codeph">LoginModule</code>s. All you have to know is how to write your application and specify configuration information (such as in a login configuration file) such that the application will be able to utilize the LoginModule specified by the configuration to authenticate the user.</p>
<p>If, on the other hand, you are a programmer who wishes to write a LoginModule implementing an authentication technology, see the <a href="java-authentication-and-authorization-service-jaas-loginmodule-developers-guide1.htm#GUID-CB46C30D-FFF1-466F-B2F5-6DE0BD5DA43A">Java Authentication and Authorization Service (JAAS): LoginModule Developer's Guide</a> for detailed step-by-step instructions.</p>
</div>
</div>
<div class="sect4"><a id="GUID-1018AB86-8912-4C00-8717-2FA2B54A4866"></a>
<h4 id="JSSEC-GUID-1018AB86-8912-4C00-8717-2FA2B54A4866" class="sect4">CallbackHandler</h4>
<div>
<p>In some cases a <code class="codeph">LoginModule</code> must communicate with the user to obtain authentication information. <code class="codeph">LoginModule</code>s use a <a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/callback/CallbackHandler.html" target="_blank"><span class="apiname">javax.security.auth.callback.CallbackHandler</span></a> for this purpose. Applications implement the <code class="codeph">CallbackHandler</code> <span class="bold">interface</span> and pass it to the <code class="codeph">LoginContext</code>, which forwards it directly to the underlying <code class="codeph">LoginModule</code>s. A <code class="codeph">LoginModule</code> uses the <code class="codeph">CallbackHandler</code> both to gather input from users (such as a password or smart card pin number) or to supply information to users (such as status information). By allowing the application to specify the <code class="codeph">CallbackHandler</code>, underlying <code class="codeph">LoginModules</code> can remain independent of the different ways applications interact with users. For example, the implementation of a <code class="codeph">CallbackHandler</code> for a GUI application might display a window to solicit input from a user. On the other hand, the implementation of a <code class="codeph">CallbackHandler</code> for a non-GUI tool might simply prompt the user for input directly from the command line.</p>
<p><code class="codeph">CallbackHandler</code></p>
<p>is an interface with one method to implement:</p>
<pre dir="ltr">
     void handle(Callback[] callbacks)
         throws java.io.IOException, UnsupportedCallbackException;
</pre>
<p>The <code class="codeph">LoginModule</code> passes the <code class="codeph">CallbackHandler handle</code> method an array of appropriate <code class="codeph">Callback</code>s, for example a <a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/callback/NameCallback.html" target="_blank"><span class="apiname">NameCallback</span></a> for the user name and a <a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/callback/PasswordCallback.html" target="_blank"><span class="apiname">PasswordCallback</span></a> for the password, and the <code class="codeph">CallbackHandler</code> performs the requested user interaction and sets appropriate values in the <code class="codeph">Callback</code>s. For example, to process a <code class="codeph">NameCallback</code>, the <code class="codeph">CallbackHandler</code> may prompt for a name, retrieve the value from the user, and call the <code class="codeph">NameCallback</code>'s <code class="codeph">setName</code> method to store the name.</p>
<p>The <a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/callback/CallbackHandler.html" target="_blank"><code class="codeph">CallbackHandler</code></a> documentation has a lengthy example not included in this document that readers may want to examine.</p>
</div>
</div>
<div class="sect4"><a id="GUID-A6E64966-EDDC-4519-9E42-1114E5E3DEFC"></a>
<h4 id="JSSEC-GUID-A6E64966-EDDC-4519-9E42-1114E5E3DEFC" class="sect4">Callback</h4>
<div>
<p>The <a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/callback/package-summary.html" target="_blank"><code class="codeph">javax.security.auth.callback</code></a> package contains the Callback <span class="bold">interface</span> as well as several implementations. LoginModules may pass an array of Callbacks directly to the handle method of a <a href="java-authentication-and-authorization-service-jaas-reference-guide.htm#GUID-1018AB86-8912-4C00-8717-2FA2B54A4866">CallbackHandler</a>.</p>
<p>Please consult the various Callback APIs for more information on their use.</p>
</div>
</div>
</div>
<div class="sect3"><a id="GUID-B8891FFA-ACD2-4E42-9488-0551B28F31C8"></a>
<h3 id="JSSEC-GUID-B8891FFA-ACD2-4E42-9488-0551B28F31C8" class="sect3">Authorization Classes</h3>
<div>
<p>To make JAAS authorization take place, granting access control permissions based not just on what code is running but also on who is running it, the following is required:</p>
<ul style="list-style-type: disc;">
<li>The user must be authenticated, as described in the <a href="java-authentication-and-authorization-service-jaas-reference-guide.htm#GUID-164692CF-6790-488C-BF86-39F7C5CF0F5A">LoginContext</a> section.</li>
<li>The Subject that is the result of authentication must be associated with an access control context, as described in the <a href="java-authentication-and-authorization-service-jaas-reference-guide.htm#GUID-804BDE80-9E66-421C-BF0A-A96FBE7DE4E3">Subject</a> section.</li>
<li>Principal-based entries must be configured in the security policy, as described below.</li>
</ul>
<p>The <code class="codeph">Policy</code> abstract class and the authorization-specific classes <code class="codeph">AuthPermission</code> and <code class="codeph">PrivateCredentialPermission</code> are described below.</p>
</div>
<div class="sect4"><a id="GUID-66990EE6-1213-4BF7-AC43-A4C75AE6746D"></a>
<h4 id="JSSEC-GUID-66990EE6-1213-4BF7-AC43-A4C75AE6746D" class="sect4">Policy</h4>
<div>
<p>The <a href="https://docs.oracle.com/javase/10/docs/api/java/security/Policy.html" target="_blank"><code class="codeph">java.security.Policy</code></a> class is an <span class="bold">abstract</span> class for representing the system-wide access control policy. The <code class="codeph">Policy</code> API supports <a href="https://docs.oracle.com/javase/10/docs/api/java/security/Principal.html" target="_blank"><code class="codeph">Principal</code></a>-based queries.</p>
<p>As a default, the JDK provides a file-based subclass implementation, which was upgraded to support <code class="codeph">Principal</code>-based <code class="codeph">grant</code> entries in policy files.</p>
<p>Policy files and the structure of entries within them are described in <a href="permissions-jdk1.htm#GUID-789089CA-8557-4017-B8B0-6899AD3BA18D">Default Policy Implementation and Policy File Syntax</a>.</p>
</div>
</div>
<div class="sect4"><a id="GUID-B7D676A5-E9E6-4FDA-B0F3-8A51B3747138"></a>
<h4 id="JSSEC-GUID-B7D676A5-E9E6-4FDA-B0F3-8A51B3747138" class="sect4">AuthPermission</h4>
<div>
<p>The <a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/AuthPermission.html" target="_blank"><code class="codeph">javax.security.auth.AuthPermission</code></a> class encapsulates the basic permissions required for JAAS. An <code class="codeph">AuthPermission</code> contains a name (also referred to as a "target name") but no actions list; you either have the named permission or you don't.</p>
<p>In addition to its inherited methods (from the <a href="https://docs.oracle.com/javase/10/docs/api/java/security/Permission.html" target="_blank"><code class="codeph">java.security.Permission</code></a> class), an <code class="codeph">AuthPermission</code> has two public constructors:</p>
<pre dir="ltr">
    public AuthPermission(String name);
    public AuthPermission(String name, String actions);
</pre>
<p>The first constructor creates a new <code class="codeph">AuthPermission</code> with the specified name. The second constructor also creates a new <code class="codeph">AuthPermission</code> object with the specified name, but has an additional actions argument which is currently unused and should be null. This constructor exists solely for the <code class="codeph">Policy</code> object to instantiate new <code class="codeph">Permission</code> objects. For most other code, the first constructor is appropriate.</p>
<p>Currently the <code class="codeph">AuthPermission</code> object is used to guard access to the <code class="codeph">Policy</code>, <code class="codeph">Subject</code>, <code class="codeph">LoginContext</code>, and <code class="codeph">Configuration</code> objects. Refer to the <a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/AuthPermission.html" target="_blank"><code class="codeph">AuthPermission</code></a> Javadoc API documentation for the list of valid names that are supported.</p>
</div>
</div>
<div class="sect4"><a id="GUID-D7D015EE-54C6-4D85-83C2-05742314847D"></a>
<h4 id="JSSEC-GUID-D7D015EE-54C6-4D85-83C2-05742314847D" class="sect4">PrivateCredentialPermission</h4>
<div>
<p>The <a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/PrivateCredentialPermission.html" target="_blank"><code class="codeph">javax.security.auth.PrivateCredentialPermission</code></a> class protects access to a <code class="codeph">Subject</code>'s private credentials and provides one public constructor:</p>
<pre dir="ltr">
     public PrivateCredentialPermission(String name, String actions);
</pre></div>
</div>
</div>
</div>
<div class="sect2"><a id="GUID-7B9C6511-A221-414A-8A4B-6BCF08172065"></a>
<h2 id="JSSEC-GUID-7B9C6511-A221-414A-8A4B-6BCF08172065" class="sect2">JAAS Tutorials and Sample Programs</h2>
<div>
<p>The <a href="jaas-authentication-tutorial.htm#GUID-BFEBDB00-9826-499C-A20F-E9463883DED4">JAAS Authentication</a> and <a href="jaas-authorization-tutorial.htm#GUID-D43CF965-8A5F-4A23-A2AF-F41DD5F8B411">JAAS Authorization</a> tutorials contain the following samples:</p>
<ul style="list-style-type: disc;">
<li><a href="jaas-authentication-tutorial.htm#GUID-E007D5F4-3FA5-417A-B85F-E669839F0101__GUID-1270A0AC-EA51-4A47-B9BC-BDB42F96F5FE"><code>SampleAcn.java</code></a> is a sample application demonstrating JAAS authentication.</li>
<li><a href="jaas-authorization-tutorial.htm#GUID-07EAB926-63EA-48F4-8DF0-4CC4526FA545__GUID-9AE66C05-0850-4AAF-8DD9-7D940069844F"><code>SampleAzn.java</code></a> is a sample application used by the authorization tutorial. It demonstrates both authentication and authorization.</li>
<li><a href="jaas-authentication-tutorial.htm#GUID-A7E0803F-DA0B-42BF-8E25-DA5889BE847F">The Login Configuration File for the JAAS Authentication Tutorial</a> describes <code>sample_jaas.config</code>, which is a sample login configuration file used by both tutorials.</li>
<li><a href="jaas-authentication-tutorial.htm#GUID-44F2BF3A-F51D-4F21-8F40-96CB1120396D__SAMPLEACN.POLICY-2FEDE143"><code>sampleacn.policy</code></a> is a sample policy file granting permissions required by the code for the authentication tutorial.</li>
<li><a href="jaas-authorization-tutorial.htm#GUID-3A2FF6CF-3124-4402-B550-D0F4E76B3D4D__GUID-6CA8F774-5E38-437D-8549-9604DEC5C317"><code>sampleazn.policy</code></a> is a sample policy file granting permissions required by the code for the authorization tutorial.</li>
<li><a href="jaas-authentication-tutorial.htm#GUID-03476CCA-11C6-4D51-B170-C8DD7C0D9075__GUID-F9A208EC-3247-4320-8158-82B0E84C6A04"><code>SampleLoginModule.java</code></a> is the class specified by the tutorials' login configuration file (<code class="codeph">sample_jaas.config</code>) as the class implementing the desired underlying authentication. <span class="apiname">SampleLoginModule</span>'s user authentication consists of simply verifying that the name and password specified by the user have specific values.</li>
<li><a href="jaas-authentication-tutorial.htm#GUID-03476CCA-11C6-4D51-B170-C8DD7C0D9075__GUID-3EA5533B-1284-481E-A35F-C82B17837F2E"><code>SamplePrincipal.java</code></a> is a sample class implementing the <a href="https://docs.oracle.com/javase/10/docs/api/java/security/Principal.html" target="_blank"><code class="codeph">Principal</code></a> interface. It is used by <span class="apiname">SampleLoginModule</span>.</li>
</ul>
<p>See the tutorials for detailed information about the applications, the policy files, and the login configuration file.</p>
<p>Application writers do not need to understand the code for <code>SampleLoginModule.java</code> or <code>SamplePrincipal.java</code>, as explained in the tutorials. Programmers who wish to write LoginModules can learn how to do so by reading the <a href="java-authentication-and-authorization-service-jaas-loginmodule-developers-guide1.htm#GUID-CB46C30D-FFF1-466F-B2F5-6DE0BD5DA43A">Java Authentication and Authorization Service (JAAS): LoginModule Developer's Guide</a>.</p>
</div>
</div>
<div class="sect2"><a id="GUID-106F4B32-B9A3-4B75-BDBF-29B252BB3F53"></a>
<h2 id="JSSEC-GUID-106F4B32-B9A3-4B75-BDBF-29B252BB3F53" class="sect2">Appendix A: JAAS Settings in the java.security Security Properties File</h2>
<div>
<p>A number of JAAS-related settings can be configured in the <code class="codeph">java.security</code> master Security Properties file, which is located in the <code>conf/security</code> directory of the JDK.</p>
<p>JAAS adds two new security properties to <code class="codeph">java.security</code>:</p>
<ul style="list-style-type: disc;">
<li><code class="codeph">login.configuration.provider</code></li>
<li><code class="codeph">login.config.url.<span class="variable">n</span></code></li>
</ul>
<p>The following pre-existing properties are also relevant for JAAS users:</p>
<ul style="list-style-type: disc;">
<li><code class="codeph">policy.provider</code></li>
<li><code class="codeph">policy.url.<span class="variable">n</span></code></li>
</ul>
<p>The following example demonstrates how to configure these properties. In this example, we leave the values provided in the default <code class="codeph">java.security</code> file for the <code class="codeph">policy.provider</code>, <code class="codeph">policy.url.<span class="variable">n</span></code>, and <code class="codeph">login.configuration.provider</code> Security Properties. The default <code class="codeph">java.security</code> file also lists a value for the <code class="codeph">login.config.url.<span class="variable">n</span></code> Security Property, but it is commented out. In the example below, it is not commented.</p>
<pre dir="ltr">
...

#
# Class to instantiate as the javax.security.auth.login.Configuration
# provider.
#
login.configuration.provider=sun.security.provider.ConfigFile

#
# Default login configuration file
#
#login.config.url.1=file:${user.home}/.java.login.config

#
# Class to instantiate as the system Policy. This is the name of the class
# that will be used as the Policy object. The system class loader is used to
# locate this class.
#
policy.provider=sun.security.provider.PolicyFile

# The default is to have a single system-wide policy file,
# and a policy file in the user's home directory.
#
policy.url.1=file:${java.home}/conf/security/java.policy
policy.url.2=file:${user.home}/.java.policy

...
</pre>
<p>Note: Modifications made to this file may be overwritten by subsequent JDK updates. However, an alternate <code class="codeph">java.security</code> properties file may be specified from the command line via the system property <code class="codeph">java.security.properties=<span class="variable">&lt;URL&gt;</span></code>. This properties file appends to the system properties file. If both properties files specify values for the same key, the value from command-line properties file is selected, as it is the last one loaded.</p>
<p>Also, specifying <code class="codeph">java.security.properties==<span class="variable">&lt;URL&gt;</span></code> (using two equals signs), then that properties file will completely override the system properties file.</p>
<p>To disable the ability to specify an additional properties file from the command line, set the key <code class="codeph">security.overridePropertiesFile</code> to <code class="codeph">false</code> in the system properties file. It is set to <code class="codeph">true</code> by default.</p>
</div>
<div class="sect3"><a id="GUID-75C5BF67-1530-4383-8A0D-6C2C6B378096"></a>
<h3 id="JSSEC-GUID-75C5BF67-1530-4383-8A0D-6C2C6B378096" class="sect3">Login Configuration Provider</h3>
<div>
<p>The default JAAS login configuration implementation provided by Oracle gets its configuration information from files and expects the information to be provided in a specific format shown in the tutorials.</p>
<p>The default JAAS login configuration implementation can be replaced by specifying the alternative provider class implementation in the <code class="codeph">login.configuration.provider</code> property.</p>
<p>For example:</p>
<pre dir="ltr">
    login.configuration.provider=com.foo.Config
</pre>
<p>If the Security property <code class="codeph">login.configuration.provider</code> is not found, or is left unspecified, then it is set to the default value:</p>
<pre dir="ltr">
    login.configuration.provider=com.sun.security.auth.login.ConfigFile
</pre>
<p>Note that there is no means to dynamically set the login configuration provider from the command line.</p>
</div>
</div>
<div class="sect3"><a id="GUID-F26A634E-7D9F-41FD-822A-59A2D33E79BB"></a>
<h3 id="JSSEC-GUID-F26A634E-7D9F-41FD-822A-59A2D33E79BB" class="sect3">Login Configuration URLs</h3>
<div>
<p>If you are using a login configuration implementation that expects the configuration information to be specified in files (as does the default implementation from Oracle), the location of the login configuration file(s) can be statically set by specifying their respective URLs in the <code class="codeph">login.config.url.<span class="variable">n</span></code> property. '<span class="variable">n</span>' is a consecutively numbered integer starting with 1. If multiple configuration files are specified (if <span class="variable">n</span> &gt;= 2), they will be read and unioned into one single configuration.</p>
<p>For example:</p>
<pre dir="ltr">
  login.config.url.1=file:C:/config/.java.login.config
  login.config.url.2=file:C:/users/foo/.foo.login.config
</pre>
<p>If the location of the configuration files is not set in the <code class="codeph">java.security</code> properties file, and also is not specified dynamically from the command line (via the <code class="codeph">-Djava.security.auth.login.config</code> option), JAAS attempts to load a default configuration from</p>
<pre dir="ltr">
<span class="variable">file:${user.home}</span>/.java.login.config
</pre></div>
</div>
<div class="sect3"><a id="GUID-6396FFE2-3877-405C-B40C-8B838A2B69D5"></a>
<h3 id="JSSEC-GUID-6396FFE2-3877-405C-B40C-8B838A2B69D5" class="sect3">Policy Provider</h3>
<div>
<p>The default policy implementation can be replaced by specifying the alternative provider class implementation in the <code class="codeph">policy.provider</code> property.</p>
<p>For example:</p>
<pre dir="ltr">
policy.provider=com.foo.Policy
</pre>
<p>If the Security property <code class="codeph">policy.provider</code> is not found, or is left unspecified, then the <code class="codeph">Policy</code> is set to the default value:</p>
<pre dir="ltr">
policy.provider=sun.security.provider.PolicyFile
</pre>
<p>Note that there is no means to dynamically set the policy provider from the command line.</p>
</div>
</div>
<div class="sect3"><a id="GUID-D6502328-3C68-4E79-816B-599CC503DF73"></a>
<h3 id="JSSEC-GUID-D6502328-3C68-4E79-816B-599CC503DF73" class="sect3">Policy File URLs</h3>
<div>
<p>The location of the access control policy files can be statically set by specifying their respective URLs in the <code class="codeph">auth.policy.url.<span class="variable">n</span></code> property. <code class="codeph"><span class="variable">n</span></code> is a consecutively numbered integer starting with 1. If multiple policies are specified (if <code class="codeph"><span class="variable">n</span></code> &gt;= 2), they will be read and unioned into one single policy.</p>
<p>For example:</p>
<pre dir="ltr">
policy.url.1=file:C:/policy/.java.policy
policy.url.2=file:C:/users/foo/.foo.policy
</pre>
<p>If the location of the policy file(s) is not set in the <code class="codeph">java.security</code> properties file, and is not specified dynamically from the command line (via the <code class="codeph">-Djava.security.policy</code> option), the access control policy defaults to the same policy as that of the system policy file installed with the JDK. That policy file</p>
<ul style="list-style-type: disc;">
<li>grants all permissions to standard extensions</li>
<li>allows anyone to listen on un-privileged ports</li>
<li>allows any code to read certain "standard" properties that are not security-sensitive, such as the <code class="codeph">os.name</code> and <code class="codeph">file.separator</code> properties.</li>
</ul>
</div>
</div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment455">
<tr>
<td class="cellalignment462">
<table class="cellalignment460">
<tr>
<td class="cellalignment459"><a href="java-authentication-and-authorization-service-jaas1.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment459"><a href="appendix-b-jaas-login-configuration-file.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1993, 2018, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment464">
<table class="cellalignment458">
<tr>
<td class="cellalignment459"><a href="http://docs.oracle.com/javase/10/index.html"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment459"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment459"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
