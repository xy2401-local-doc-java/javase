<!DOCTYPE html>
<html lang="en-US" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<meta http-equiv="Content-Type" content="UTF-8" />
<title>jarsigner</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)" />
<meta name="description" content="You use the jarsigner tool to sign and verify Java Archive (JAR) files." />
<meta name="dcterms.created" content="2018-03-13T12:23:13Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Java Platform, Standard Edition Tools Reference" />
<meta name="dcterms.identifier" content="E91146-01" />
<meta name="dcterms.isVersionOf" content="JSWOR" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1993, 2018, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="http://docs.oracle.com/javase/10/index.html" title="Home" type="text/html" />
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Prev" href="keytool.htm" title="Previous" type="text/html" />
<link rel="Next" href="kinit.htm" title="Next" type="text/html" />
<link rel="alternate" href="JSWOR.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/fonts.css">
<link rel="stylesheet" href="../dcommon/css/foundation.css">
<link rel="stylesheet" href="../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css">
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
<script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns" dir="ltr">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864"></a> <span id="PAGE" style="display:none;">20/63</span> <!-- End Header -->
<h1 id="JSWOR-GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864" class="sect1">jarsigner</h1>
<div>
<p><span>You use the <code class="codeph">jarsigner</code> tool to sign and verify Java Archive (JAR) files.</span></p>
<div class="section">
<p class="subhead1">Synopsis</p>
<pre dir="ltr">
jarsigner [ <span class="variable">options</span> ] <span class="variable">jar-file</span> <span class="variable">alias</span> jarsigner -verify [ <span class="variable">options</span> ] <span class="variable">jar-file</span> [<span class="variable">alias ...</span>]
</pre>
<pre dir="ltr">
jarsigner -verify [ <span class="variable">options</span> ] <span class="variable">jar-file</span> [<span class="variable">alias ...</span>]
</pre>
<dl>
<dt class="dlterm"><a id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-F349FBC4-96ED-45B0-BFBF-6B225BDC8653"><!-- --></a><code class="codeph"><span class="variable">options</span></code></dt>
<dd>
<p>The command-line options. See <a href="jarsigner.htm#GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__CCHIFIAD">Options for jarsigner</a>.</p>
</dd>
<dt class="dlterm"><a id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-CE43A33D-33C9-4645-B50F-7C318351D64D"><!-- --></a><code class="codeph">-verify</code></dt>
<dd>
<p>The <code class="codeph">-verify</code> option can take zero or more keystore alias names after the JAR file name. When the <code class="codeph">-verify</code> option is specified, the <code class="codeph">jarsigner</code> command checks that the certificate used to verify each signed entry in the JAR file matches one of the keystore aliases. The aliases are defined in the keystore specified by <code class="codeph">-keystore</code> or the default keystore.</p>
<p>If you also specify the <code class="codeph">-strict</code> option, and the <code class="codeph">jarsigner</code> command detects severe warnings, the message, "jar verified, with signer errors" is displayed.</p>
</dd>
<dt class="dlterm"><a id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-DBFD3E4F-0BAF-4DC2-AEC7-B9EA10CEF6A4"><!-- --></a><code class="codeph"><span class="variable">jar-file</span></code></dt>
<dd>
<p>The JAR file to be signed.</p>
<p>If you also specified the <code class="codeph">-strict</code> option, and the <code class="codeph">jarsigner</code> command detected severe warnings, the message, "jar signed, with signer errors" is displayed.</p>
</dd>
<dt class="dlterm"><a id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-04A31530-AB96-4148-A933-F146F8766593"><!-- --></a><code class="codeph"><span class="variable">alias</span></code></dt>
<dd>
<p>The aliases are defined in the keystore specified by <code class="codeph">-keystore</code> or the default keystore.</p>
</dd>
</dl>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Description</p>
<p>The <code class="codeph">jarsigner</code> tool has two purposes:</p>
<ul style="list-style-type: disc;">
<li>
<p>To sign Java Archive (JAR) files.</p>
</li>
<li>
<p>To verify the signatures and integrity of signed JAR files.</p>
</li>
</ul>
<p>The JAR feature enables the packaging of class files, images, sounds, and other digital data in a single file for faster and easier distribution. A tool named <code class="codeph">jar</code> enables developers to produce JAR files. (Technically, any ZIP file can also be considered a JAR file, although when created by the <code class="codeph">jar</code> command or processed by the <code class="codeph">jarsigner</code> command, JAR files also contain a <code class="codeph">META-INF/MANIFEST.MF</code> file.)</p>
<p>A digital signature is a string of bits that is computed from some data (the data being signed) and the private key of an entity (a person, company, and so on). Similar to a handwritten signature, a digital signature has many useful characteristics:</p>
<ul style="list-style-type: disc;">
<li>
<p>Its authenticity can be verified by a computation that uses the public key corresponding to the private key used to generate the signature.</p>
</li>
<li>
<p>It can&rsquo;t be forged, assuming the private key is kept secret.</p>
</li>
<li>
<p>It is a function of the data signed and thus can&rsquo;t be claimed to be the signature for other data as well.</p>
</li>
<li>
<p>The signed data can&rsquo;t be changed. If the data is changed, then the signature can&rsquo;t be verified as authentic.</p>
</li>
</ul>
<p>To generate an entity's signature for a file, the entity must first have a public/private key pair associated with it and one or more certificates that authenticate its public key. A certificate is a digitally signed statement from one entity that says that the public key of another entity has a particular value.</p>
<p>The <code class="codeph">jarsigner</code> command uses key and certificate information from a keystore to generate digital signatures for JAR files. A keystore is a database of private keys and their associated X.509 certificate chains that authenticate the corresponding public keys. The <code class="codeph">keytool</code> command is used to create and administer keystores.</p>
<p>The <code class="codeph">jarsigner</code> command uses an entity's private key to generate a signature. The signed JAR file contains, among other things, a copy of the certificate from the keystore for the public key corresponding to the private key used to sign the file. The <code class="codeph">jarsigner</code> command can verify the digital signature of the signed JAR file using the certificate inside it (in its signature block file).</p>
<p>The <code class="codeph">jarsigner</code> command can generate signatures that include a time stamp that enables a systems or deployer (including Java Plug-in) to check whether the JAR file was signed while the signing certificate was still valid.</p>
<div class="infobox-note" id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-C8816F10-695B-46E2-A761-023A1982FC95">
<p class="notep1">Note:</p>
<p><span>Although available and supported in JDK 9, the Java Plug-in has been marked as deprecated in preparation for removal in a future release. Alternatives for applets and embedded JavaFX applications, which require the plug-in, include Java Web Start and self-contained applications.</span></p>
</div>
<p>In addition, APIs allow applications to obtain the timestamp information.</p>
<p>At this time, the <code class="codeph">jarsigner</code> command can only sign JAR files created by the <code class="codeph">jar</code> command or zip files. JAR files are the same as zip files, except they also have a <code class="codeph">META-INF/MANIFEST.MF</code> file. A <code class="codeph">META-INF/MANIFEST.MF</code> file is created when the <code class="codeph">jarsigner</code> command signs a zip file.</p>
<p>The default <code class="codeph">jarsigner</code> command behavior is to sign a JAR or zip file. Use the <code class="codeph">-verify</code> option to verify a signed JAR file.</p>
<p>The <code class="codeph">jarsigner</code> command also attempts to validate the signer's certificate after signing or verifying. If there is a validation error or any other problem, the command generates warning messages. If you specify the <code class="codeph">-strict</code> option, then the command treats severe warnings as errors. See <a href="jarsigner.htm#GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__BGBIIAAG">Errors and Warnings</a>.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Keystore Aliases</p>
<p>All keystore entities are accessed with unique aliases.</p>
<p>When you use the <code class="codeph">jarsigner</code> command to sign a JAR file, you must specify the alias for the keystore entry that contains the private key needed to generate the signature. If no output file is specified, it overwrites the original JAR file with the signed JAR file.</p>
<p>Keystores are protected with a password, so the store password must be specified. You are prompted for it when you don&rsquo;t specify it on the command line. Similarly, private keys are protected in a keystore with a password, so the private key's password must be specified, and you are prompted for the password when you don&rsquo;t specify it on the command line and it isn&rsquo;t the same as the store password.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Keystore Location</p>
<p>The <code class="codeph">jarsigner</code> command has a <code class="codeph">-keystore</code> option for specifying the URL of the keystore to be used. The keystore is by default stored in a file named <code class="codeph">.keystore</code> in the user's home directory, as determined by the <code class="codeph">user.home</code> system property.</p>
<p><span class="bold"><span>Oracle Solaris, Linux, and OS X</span>:</span> <code class="codeph">user.home</code> defaults to the user's home directory.</p>
<p>The input stream from the <code class="codeph">-keystore</code> option is passed to the <code class="codeph">KeyStore.load</code> method. If <code class="codeph">NONE</code> is specified as the URL, then a null stream is passed to the <code class="codeph">KeyStore.load</code> method. <code class="codeph">NONE</code> should be specified when the <code class="codeph">KeyStore</code> class isn&rsquo;t file based, for example, when it resides on a hardware token device.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Keystore Implementation</p>
<p>The <code class="codeph">KeyStore</code> class provided in the <code class="codeph">java.security</code> package supplies a number of well-defined interfaces to access and modify the information in a keystore. You can have multiple different concrete implementations, where each implementation is for a particular type of keystore.</p>
<p>Currently, there are two command-line tools that use keystore implementations (<code class="codeph">keytool</code> and <code class="codeph">jarsigner</code>).</p>
<p>The default keystore implementation is <code class="codeph">PKCS12</code>. This is a cross platform keystore based on the RSA PKCS12 Personal Information Exchange Syntax Standard. This standard is primarily meant for storing or transporting a user's private keys, certificates, and miscellaneous secrets. There is another built-in implementation, provided by Oracle. It implements the keystore as a file with a proprietary keystore type (format) named <code class="codeph">JKS</code>. It protects each private key with its individual password, and also protects the integrity of the entire keystore with a (possibly different) password.</p>
<p>Keystore implementations are provider-based, which means the application interfaces supplied by the <code class="codeph">KeyStore</code> class are implemented in terms of a Service Provider Interface (SPI). There is a corresponding abstract <code class="codeph">KeystoreSpi</code> class, also in the <code class="codeph">java.security package</code>, that defines the Service Provider Interface methods that providers must implement. The term provider refers to a package or a set of packages that supply a concrete implementation of a subset of services that can be accessed by the Java Security API. To provide a keystore implementation, clients must implement a provider and supply a <code class="codeph">KeystoreSpi</code> subclass implementation, as described in <a class="olink JSSEC-GUID-2BCFDD85-D533-4E6C-8CE9-29990DEB0190" target="_blank" href="../security/java-cryptography-architecture-jca-reference-guide.htm#JSSEC-GUID-2BCFDD85-D533-4E6C-8CE9-29990DEB0190">How to Implement a Provider in the Java Cryptography Architecture</a>.</p>
<p>Applications can choose different types of keystore implementations from different providers, with the <code class="codeph">getInstance</code> factory method in the <code class="codeph">KeyStore</code> class. A keystore type defines the storage and data format of the keystore information and the algorithms used to protect private keys in the keystore and the integrity of the keystore itself. Keystore implementations of different types aren&rsquo;t compatible.</p>
<p>The <code class="codeph">jarsigner</code> commands can read file-based keystores from any location that can be specified using a URL. In addition, these commands can read non-file-based keystores such as those provided by MSCAPI on Windows and PKCS11 on all platforms.</p>
<p>For the <code class="codeph">jarsigner</code> and <code class="codeph">keytool</code> commands, you can specify a keystore type at the command line with the <code class="codeph">-storetype</code> option.</p>
<p>If you don&rsquo;t explicitly specify a keystore type, then the tools choose a keystore implementation based on the value of the <code class="codeph">keystore.type</code> property specified in the security properties file. The security properties file is called <code class="codeph">java.security</code>, and it resides in the JDK security properties directory, <code class="codeph">java.home/conf/security</code>.</p>
<p>Each tool gets the <code class="codeph">keystore.type</code> value and then examines all the installed providers until it finds one that implements keystores of that type. It then uses the keystore implementation from that provider.</p>
<p>The <code class="codeph">KeyStore</code> class defines a static method named <code class="codeph">getDefaultType</code> that lets applications and applets retrieve the value of the <code class="codeph">keystore.type</code> property. The following line of code creates an instance of the default keystore type as specified in the <code class="codeph">keystore.type property</code>:</p>
<pre dir="ltr">
KeyStore keyStore = KeyStore.getInstance(KeyStore.getDefaultType());
</pre>
<p>The default keystore type is <code class="codeph">pkcs12</code>, which is a cross platform keystore based on the RSA PKCS12 Personal Information Exchange Syntax Standard. This is specified by the following line in the security properties file:</p>
<pre dir="ltr">
keystore.type=pkcs12
</pre>
<p>Case doesn&rsquo;t matter in keystore type designations. For example, <code class="codeph">JKS</code> is the same as <code class="codeph">jks</code>.</p>
<p>To have the tools utilize a keystore implementation other than the default, you can change that line to specify a different keystore type. For example, if you want to use the Oracle's <code class="codeph">jks</code> keystore implementation, then change the line to the following:</p>
<pre dir="ltr">
keystore.type=jks
</pre></div>
<!-- class="section" -->
<div class="section" id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__SUPPORTEDALGORITHMS-9B9E0E06">
<p class="subhead1">Supported Algorithms</p>
<p>By default, the <code class="codeph">jarsigner</code> command signs a JAR file using one of the following algorithms files depending on the type and size of the private key:</p>
<div class="tblformal" id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-5709F884-DD73-4401-A2FC-C7610922DC53">
<table class="cellalignment193" summary="Default signature algorithms">
<thead>
<tr class="cellalignment187">
<th class="cellalignment194" id="d43779e430">keyalg</th>
<th class="cellalignment194" id="d43779e432">keysize</th>
<th class="cellalignment195" id="d43779e434">default sigalg</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment187">
<td class="cellalignment196" id="d43779e438" headers="d43779e430">
<p>DSA</p>
</td>
<td class="cellalignment196" headers="d43779e438 d43779e432">
<p>any size</p>
</td>
<td class="cellalignment197" headers="d43779e438 d43779e434">
<p>SHA256withDSA &nbsp;&nbsp;</p>
</td>
</tr>
<tr class="cellalignment187">
<td class="cellalignment196" id="d43779e448" headers="d43779e430">
<p>RSA</p>
&nbsp;&nbsp;&nbsp;</td>
<td class="cellalignment196" headers="d43779e448 d43779e432">
<p>&lt;= 3072</p>
<p>&lt;= 7680</p>
<p>&gt; 7680</p>
</td>
<td class="cellalignment197" headers="d43779e448 d43779e434">
<p>SHA256withRSA</p>
<p>SHA384withRSA</p>
<p>SHA512withRSA</p>
</td>
</tr>
<tr class="cellalignment187">
<td class="cellalignment196" id="d43779e467" headers="d43779e430">
<p>EC</p>
</td>
<td class="cellalignment196" headers="d43779e467 d43779e432">
<p>&lt;384</p>
<p>&lt;512</p>
<p>= 512</p>
</td>
<td class="cellalignment197" headers="d43779e467 d43779e434">
<p>SHA256withECDSA</p>
<p>SHA384withECDSA</p>
<p>SHA512withECDSA</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p>These default signature algorithms can be overridden by using the <code class="codeph">-sigalg</code> option.</p>
<p>Signed JAR file algorithms are checked against the <code class="codeph">jdk.jar.disabledAlgorithms</code> security property during verification (<code class="codeph">-verify</code>). If the JAR file was signed with any algorithms that are disabled, it will be treated as an unsigned JAR file. For detailed verification output, include <code class="codeph">-J-Djava.security.debug=jar</code>. The default value for the <code class="codeph">jdk.jar.disabledAlgorithms</code> security property is defined in the <code class="codeph">java.security</code> file (located in the JRE's <code class="codeph">$JAVA_HOME/conf/security</code> directory).</p>
<div class="infobox-note" id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-F9BBEC6A-79DF-49D2-8043-F8F85FA783A2">
<p class="notep1">Note:</p>
<p>In order to improve out of the box security, default key size and signature algorithm names are periodically updated to stronger values with each release of the JDK. If interoperability with older releases of the JDK is important, please make sure the defaults are supported by those releases, or alternatively use the <code class="codeph">-sigalg</code> option to override the default values at your own risk.</p>
</div>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">The Signed JAR File</p>
<p>When the <code class="codeph">jarsigner</code> command is used to sign a JAR file, the output signed JAR file is exactly the same as the input JAR file, except that it has two additional files placed in the META-INF directory:</p>
<ul style="list-style-type: disc;">
<li>
<p>A signature file with an <code class="codeph">.SF</code> extension</p>
</li>
<li>
<p>A signature block file with a <code class="codeph">.DSA</code>, <code class="codeph">.RSA</code>, or <code class="codeph">.EC</code> extension</p>
</li>
</ul>
<p>The base file names for these two files come from the value of the <code class="codeph">-sigfile</code> option. For example, when the option is <code class="codeph">-sigfile MKSIGN</code>, the files are named <code class="codeph">MKSIGN.SF</code> and <code class="codeph">MKSIGN.DSA</code></p>
<p>If no <code class="codeph">-sigfile</code> option appears on the command line, then the base file name for the <code class="codeph">.SF</code> and <code class="codeph">.DSA</code> files is the first 8 characters of the alias name specified on the command line, all converted to uppercase. If the alias name has fewer than 8 characters, then the full alias name is used. If the alias name contains any characters that aren&rsquo;t allowed in a signature file name, then each such character is converted to an underscore (_) character in forming the file name. Valid characters include letters, digits, underscores, and hyphens.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Signature File</p>
<p>A signature file (<code class="codeph">.SF</code> file) looks similar to the manifest file that is always included in a JAR file when the <code class="codeph">jarsigner</code> command is used to sign the file. For each source file included in the JAR file, the <code class="codeph">.SF</code> file has two lines, such as in the manifest file, that list the following:</p>
<ul style="list-style-type: disc;">
<li>
<p>File name</p>
</li>
<li>
<p>Name of the digest algorithm (SHA)</p>
</li>
<li>
<p>SHA digest value</p>
</li>
</ul>
<div class="infobox-note" id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-D10F208C-BF2D-4DFD-9715-6B7975E29891">
<p class="notep1">Note:</p>
<p>The name of the digest algorithm (SHA) and the SHA digest value are on the same line.</p>
</div>
<p>In the manifest file, the SHA digest value for each source file is the digest (hash) of the binary data in the source file. In the <code class="codeph">.SF</code> file, the digest value for a specified source file is the hash of the two lines in the manifest file for the source file.</p>
<p>The signature file, by default, includes a header with a hash of the whole manifest file. The header also contains a hash of the manifest header. The presence of the header enables verification optimization. See <a href="jarsigner.htm#GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__CCHDCIBD">JAR File Verification</a>.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Signature Block File</p>
<p>The <code class="codeph">.SF</code> file is signed and the signature is placed in the signature block file. This file also contains, encoded inside it, the certificate or certificate chain from the keystore that authenticates the public key corresponding to the private key used for signing. The file has the extension <code class="codeph">.DSA</code>, <code class="codeph">.RSA</code>, or <code class="codeph">.EC</code>, depending on the digest algorithm used.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Signature Time Stamp</p>
<div class="p">The <code class="codeph">jarsigner</code> command used with the following options generates and stores a signature time stamp when signing a JAR file:
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">-tsa <span class="variable">url</span></code></p>
</li>
<li>
<p><code class="codeph">-tsacert <span class="variable">alias</span></code></p>
</li>
<li>
<p><code class="codeph">-tsapolicyid <span class="variable">policyid</span></code></p>
</li>
<li>
<p><code class="codeph">-tsadigestalg <span class="variable">algorithm</span></code></p>
</li>
</ul>
See <a href="jarsigner.htm#GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__CCHIFIAD">Options for jarsigner</a>.</div>
</div>
<!-- class="section" -->
<div class="section" id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__CCHDCIBD">
<p class="subhead1">JAR File Verification</p>
<p>A successful JAR file verification occurs when the signatures are valid, and none of the files that were in the JAR file when the signatures were generated have changed since then. JAR file verification involves the following steps:</p>
<ol>
<li>
<p>Verify the signature of the <code class="codeph">.SF</code> file.</p>
<p>The verification ensures that the signature stored in each signature block (<code class="codeph">.DSA</code>) file was generated using the private key corresponding to the public key whose certificate (or certificate chain) also appears in the <code class="codeph">.DSA</code> file. It also ensures that the signature is a valid signature of the corresponding signature (<code class="codeph">.SF</code>) file, and thus the <code class="codeph">.SF</code> file wasn&rsquo;t tampered with.</p>
</li>
<li>
<p>Verify the digest listed in each entry in the <code class="codeph">.SF</code> file with each corresponding section in the manifest.</p>
<p>The <code class="codeph">.SF</code> file by default includes a header that contains a hash of the entire manifest file. When the header is present, the verification can check to see whether or not the hash in the header matches the hash of the manifest file. If there is a match, then verification proceeds to the next step.</p>
<p>If there is no match, then a less optimized verification is required to ensure that the hash in each source file information section in the <code class="codeph">.SF</code> file equals the hash of its corresponding section in the manifest file. See Signature File.</p>
<p>One reason the hash of the manifest file that is stored in the <code class="codeph">.SF</code> file header might not equal the hash of the current manifest file is that one or more files were added to the JAR file (with the <code class="codeph">jar</code> tool) after the signature and <code class="codeph">.SF</code> file were generated. When the <code class="codeph">jar</code> tool is used to add files, the manifest file is changed by adding sections to it for the new files, but the <code class="codeph">.SF</code> file isn&rsquo;t changed. A verification is still considered successful when none of the files that were in the JAR file when the signature was generated have been changed since then. This happens when the hashes in the non-header sections of the <code class="codeph">.SF</code> file equal the hashes of the corresponding sections in the manifest file.</p>
</li>
<li>
<p>Read each file in the JAR file that has an entry in the <code class="codeph">.SF</code> file. While reading, compute the file's digest and compare the result with the digest for this file in the manifest section. The digests should be the same or verification fails.</p>
<p>If any serious verification failures occur during the verification process, then the process is stopped and a security exception is thrown. The <code class="codeph">jarsigner</code> command catches and displays the exception.</p>
</li>
<li>
<p>Check for disabled algorithm usage. See <a href="jarsigner.htm#GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__SUPPORTEDALGORITHMS-9B9E0E06">Supported Algorithms</a>.</p>
</li>
</ol>
<div class="infobox-note" id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-96FA2F8A-C473-4193-A8E6-8C679E369A73">
<p class="notep1">Note:</p>
<p>You should read any addition warnings (or errors if you specified the <code class="codeph">-strict</code> option), as well as the content of the certificate (by specifying the <code class="codeph">-verbose</code> and <code class="codeph">-certs</code> options) to determine if the signature can be trusted.</p>
</div>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Multiple Signatures for a JAR File</p>
<p>A JAR file can be signed by multiple people by running the <code class="codeph">jarsigner</code> command on the file multiple times and specifying the alias for a different person each time, as follows:</p>
<pre dir="ltr">
jarsigner myBundle.jar susan
jarsigner myBundle.jar kevin
</pre>
<p>When a JAR file is signed multiple times, there are multiple <code class="codeph">.SF</code> and <code class="codeph">.DSA</code> files in the resulting JAR file, one pair for each signature. In the previous example, the output JAR file includes files with the following names:</p>
<pre dir="ltr">
SUSAN.SF
SUSAN.DSA
KEVIN.SF
KEVIN.DSA
</pre></div>
<!-- class="section" -->
<div class="section" id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__CCHIFIAD">
<p class="subhead1">Options for jarsigner</p>
<p>The following sections describe the options for the <code class="codeph">jarsigner</code>. Be aware of the following standards:</p>
<ul style="list-style-type: disc;">
<li>
<p>All option names are preceded by a hyphen sign (-).</p>
</li>
<li>
<p>The options can be provided in any order.</p>
</li>
<li>
<p>Items that are in italics or underlined (option values) represent the actual values that must be supplied.</p>
</li>
<li>
<p>The <code class="codeph">-storepass</code>, <code class="codeph">-keypass</code>, <code class="codeph">-sigfile</code>, <code class="codeph">-sigalg</code>, <code class="codeph">-digestalg</code>, <code class="codeph">-signedjar</code>, and TSA-related options are only relevant when signing a JAR file; they aren&rsquo;t relevant when verifying a signed JAR file. The <code class="codeph">-keystore</code> option is relevant for signing and verifying a JAR file. In addition, aliases are specified when signing and verifying a JAR file.</p>
</li>
</ul>
<dl>
<dt class="dlterm"><a id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-C9F1FF0B-A356-4A0B-BF5E-34DCB44826FD"><!-- --></a><code class="codeph">-keystore <span class="variable">url</span></code></dt>
<dd>
<p>Specifies the URL that tells the keystore location. This defaults to the file <code class="codeph">.keystore</code> in the user's home directory, as determined by the <code class="codeph">user.home</code> system property.</p>
<p>A keystore is required when signing. You must explicitly specify a keystore when the default keystore doesn&rsquo;t exist or if you want to use one other than the default.</p>
<p>A keystore isn&rsquo;t required when verifying, but if one is specified or the default exists and the <code class="codeph">-verbose</code> option was also specified, then additional information is output regarding whether or not any of the certificates used to verify the JAR file are contained in that keystore.</p>
<p>The <code class="codeph">-keystore</code> argument can be a file name and path specification rather than a URL, in which case it is treated the same as a file: URL, for example, the following are equivalent:</p>
<pre dir="ltr">
-keystore <span class="variable">filePathAndName</span>
-keystore file:<span class="variable">filePathAndName</span>
</pre>
<p>If the Sun PKCS #11 provider was configured in the <code class="codeph">java.security</code> security properties file (located in the JRE's <code class="codeph">$JAVA_HOME/conf/security</code> directory), then the <code class="codeph">keytool</code> and <code class="codeph">jarsigner</code> tools can operate on the PKCS #11 token by specifying these options:</p>
<pre dir="ltr">
-keystore NONE
-storetype PKCS11
</pre>
<p>For example, the following command lists the contents of the configured PKCS#11 token:</p>
<pre dir="ltr">
keytool -keystore NONE -storetype PKCS11 -list
</pre></dd>
<dt class="dlterm"><a id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-815348A3-B454-41FA-8630-C6EEC58E148A"><!-- --></a><code class="codeph">-storepass[:env | :file] <span class="variable">argument</span></code></dt>
<dd>
<p>Specifies the password that is required to access the keystore. This is only needed when signing (not verifying) a JAR file. In that case, if a <code class="codeph">-storepass</code> option isn&rsquo;t provided at the command line, then the user is prompted for the password.</p>
<p>If the modifier <code class="codeph">env</code> or <code class="codeph">file</code> isn&rsquo;t specified, then the password has the value <code class="codeph">argument</code>. Otherwise, the password is retrieved as follows:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">env</code>: Retrieve the password from the environment variable named <code class="codeph"><span class="variable">argument</span></code>.</p>
</li>
<li>
<p><code class="codeph">file</code>: Retrieve the password from the file named <code class="codeph"><span class="variable">argument</span></code>.</p>
</li>
</ul>
<div class="infobox-note" id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-B9C88D3A-D7C1-4595-BF24-53489FB3572C">
<p class="notep1">Note:</p>
<p>The password shouldn&rsquo;t be specified on the command line or in a script unless it is for testing purposes, or you are on a secure system.</p>
</div>
</dd>
<dt class="dlterm"><a id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-13355940-D4A5-4DC3-8D4A-2CD17A6CE22F"><!-- --></a><code class="codeph">-storetype <span class="variable">storetype</span></code></dt>
<dd>
<p>Specifies the type of keystore to be instantiated. The default keystore type is the one that is specified as the value of the <code class="codeph">keystore.type</code> property in the security properties file, which is returned by the static <code class="codeph">getDefaultType</code> method in <code class="codeph">java.security.KeyStore</code>.</p>
<p>The PIN for a PKCS #11 token can also be specified with the <code class="codeph">-storepass</code> option. If none is specified, then the <code class="codeph">keytool</code> and <code class="codeph">jarsigner</code> commands prompt for the token PIN. If the token has a protected authentication path (such as a dedicated PIN-pad or a biometric reader), then the <code class="codeph">-protected</code> option must be specified and no password options can be specified.</p>
</dd>
<dt class="dlterm"><a id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-BC7F0225-ACF5-4065-BE50-7C0D59C0ADF7"><!-- --></a><code class="codeph">-keypass [:env | :file] <span class="variable">argument</span> -certchain <span class="variable">file</span></code></dt>
<dd>
<p>Specifies the password used to protect the private key of the keystore entry addressed by the alias specified on the command line. The password is required when using <code class="codeph">jarsigner</code> to sign a JAR file. If no password is provided on the command line, and the required password is different from the store password, then the user is prompted for it.</p>
<p>If the modifier <code class="codeph">env</code> or <code class="codeph">file</code> isn&rsquo;t specified, then the password has the value <code class="codeph">argument</code>. Otherwise, the password is retrieved as follows:</p>
<ul style="list-style-type: disc;">
<li>
<p><code class="codeph">env</code>: Retrieve the password from the environment variable named <code class="codeph">argument</code>.</p>
</li>
<li>
<p><code class="codeph">file</code>: Retrieve the password from the file named <code class="codeph">argument</code>.</p>
</li>
</ul>
<div class="infobox-note" id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-FD3D46E8-58AC-4592-8813-C4AAE7567D12">
<p class="notep1">Note:</p>
<p>The password shouldn&rsquo;t be specified on the command line or in a script unless it is for testing purposes, or you are on a secure system.</p>
</div>
</dd>
<dt class="dlterm"><a id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-0FB23158-7C8A-4BFB-B2D7-4286A486652E"><!-- --></a><code class="codeph">-certchain <span class="variable">file</span></code></dt>
<dd>
<p>Specifies the certificate chain to be used when the certificate chain associated with the private key of the keystore entry that is addressed by the alias specified on the command line isn&rsquo;t complete. This can happen when the keystore is located on a hardware token where there isn&rsquo;t enough capacity to hold a complete certificate chain. The file can be a sequence of concatenated X.509 certificates, or a single PKCS#7 formatted data block, either in binary encoding format or in printable encoding format (also known as Base64 encoding) as defined by <a href="http://tools.ietf.org/html/rfc1421" target="_blank">Internet RFC 1421 Certificate Encoding Standard</a>.</p>
</dd>
<dt class="dlterm"><a id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-A2DD69D4-29DD-402A-ACA4-96C9C6CDB5AD"><!-- --></a><code class="codeph">-sigfile <span class="variable">file</span></code></dt>
<dd>
<p>Specifies the base file name to be used for the generated <code class="codeph">.SF</code> and <code class="codeph">.DSA</code> files. For example, if file is <code class="codeph">DUKESIGN</code>, then the generated <code class="codeph">.SF</code> and <code class="codeph">.DSA</code> files are named <code class="codeph">DUKESIGN.SF</code> and <code class="codeph">DUKESIGN.DSA</code>, and placed in the <code class="codeph">META-INF</code> directory of the signed JAR file.</p>
<p>The characters in the file must come from the set <code class="codeph">a-zA-Z0-9_-</code>. Only letters, numbers, underscore, and hyphen characters are allowed. All lowercase characters are converted to uppercase for the <code class="codeph">.SF</code> and <code class="codeph">.DSA</code> file names.</p>
<p>If no <code class="codeph">-sigfile</code> option appears on the command line, then the base file name for the <code class="codeph">.SF</code> and <code class="codeph">.DSA</code> files is the first 8 characters of the alias name specified on the command line, all converted to upper case. If the alias name has fewer than 8 characters, then the full alias name is used. If the alias name contains any characters that aren&rsquo;t valid in a signature file name, then each such character is converted to an underscore (_) character to form the file name.</p>
</dd>
<dt class="dlterm"><a id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-ED00AF95-8D5C-4349-B661-6FBE6CBDBB24"><!-- --></a><code class="codeph">-signedjar <span class="variable">file</span></code></dt>
<dd>
<p>Specifies the name of signed JAR file.</p>
</dd>
<dt class="dlterm"><a id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-17CCF4A8-AFF1-4CB6-A73D-181DD2ED5A1F"><!-- --></a><code class="codeph">-digestalg <span class="variable">algorithm</span></code></dt>
<dd>
<p>Specifies the name of the message digest algorithm to use when digesting the entries of a JAR file.</p>
<p>For a list of standard message digest algorithm names, see <a href="https://docs.oracle.com/javase/10/docs/specs/security/standard-names.html" target="_blank">Java Security Standard Algorithm Names</a>.</p>
<p>If this option isn&rsquo;t specified, then <code class="codeph">SHA256</code> is used. There must either be a statically installed provider supplying an implementation of the specified algorithm or the user must specify one with the <code class="codeph">-providerClass</code> option; otherwise, the command will not succeed.</p>
</dd>
<dt class="dlterm"><a id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-98EB9E1F-7588-45A8-9CFD-0EA4D020BD02"><!-- --></a><code class="codeph" id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__SIGALG-38071505">-sigalg <span class="variable">algorithm</span></code></dt>
<dd>
<p>Specifies the name of the signature algorithm to use to sign the JAR file.</p>
<p>This algorithm must be compatible with the private key used to sign the JAR file. If this option isn&rsquo;t specified, then use a default algorithm matching the private key as described in the <a href="jarsigner.htm#GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__SUPPORTEDALGORITHMS-9B9E0E06">Supported Algorithms</a> section. There must either be a statically installed provider supplying an implementation of the specified algorithm or you must specify one with the <code class="codeph">-providerClass</code> option; otherwise, the command doesn&rsquo;t succeed.</p>
<p>For a list of standard message digest algorithm names, see <a href="https://docs.oracle.com/javase/10/docs/specs/security/standard-names.html" target="_blank">Java Security Standard Algorithm Names</a>.</p>
</dd>
<dt class="dlterm"><a id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-B9BBBF70-D8CC-49FD-B99C-20ACA243D318"><!-- --></a><code class="codeph">-verify</code></dt>
<dd>Verifies a signed JAR file.</dd>
<dt class="dlterm"><a id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-44730BE6-4A4B-429C-ACA8-AD23D2EEA689"><!-- --></a><code class="codeph">-verbose [:<span class="variable">suboptions</span>]</code></dt>
<dd>
<p>When the <code class="codeph">-verbose</code> option appears on the command line, it indicates that the <code class="codeph">jarsigner</code> use the verbose mode when signing or verifying with the suboptions determining how much information is shown.. This causes the , which causes <code class="codeph">jarsigner</code> to output extra information about the progress of the JAR signing or verification. The <code class="codeph"><span class="variable">suboptions</span></code> can be <code class="codeph">all</code>, <code class="codeph">grouped</code>, or <code class="codeph">summary</code>.</p>
<p>If the <code class="codeph">-certs</code> option is also specified, then the default mode (or suboption <code class="codeph">all</code>) displays each entry as it is being processed, and after that, the certificate information for each signer of the JAR file.</p>
<p>If the <code class="codeph">-certs</code> and the <code class="codeph">-verbose:grouped</code> suboptions are specified, then entries with the same signer info are grouped and displayed together with their certificate information.</p>
<p>If <code class="codeph">-certs</code> and the <code class="codeph">-verbose:summary</code> suboptions are specified, then entries with the same signer information are grouped and displayed together with their certificate information.</p>
<p>Details about each entry are summarized and displayed as <span class="italic">one entry (and more)</span>. See <a href="jarsigner.htm#GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__EXAMPLEOFVERIFYINGASIGNEDJARFILE-98AC326E">Example of Verifying a Signed JAR File</a> and <a href="jarsigner.htm#GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__EXAMPLEOFVERIFICATIONWITHCERTIFICAT-98AC3750">Example of Verification with Certificate Information</a>.</p>
</dd>
<dt class="dlterm"><a id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-3D1D0583-F824-4006-AFEC-11BC77DE6AB8"><!-- --></a><code class="codeph">-certs</code></dt>
<dd>
<p>If the <code class="codeph">-certs</code> option appears on the command line with the <code class="codeph">-verify</code> and <code class="codeph">-verbose</code> options, then the output includes certificate information for each signer of the JAR file. This information includes the name of the type of certificate (stored in the <code class="codeph">.DSA</code> file) that certifies the signer's public key, and if the certificate is an X.509 certificate (an instance of the <code class="codeph">java.security.cert.X509Certificate</code>), then the distinguished name of the signer.</p>
<p>The keystore is also examined. If no keystore value is specified on the command line, then the default keystore file (if any) is checked. If the public key certificate for a signer matches an entry in the keystore, then the alias name for the keystore entry for that signer is displayed in parentheses.</p>
</dd>
<dt class="dlterm"><a id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-8E12FCFC-C59E-41DD-8FB2-C953EC1665F6"><!-- --></a><code class="codeph">-tsa <span class="variable">url</span></code></dt>
<dd>
<p>If <code class="codeph">-tsa http://example.tsa.url</code> appears on the command line when signing a JAR file then a time stamp is generated for the signature. The URL, <code class="codeph">http://example.tsa.url</code>, identifies the location of the Time Stamping Authority (TSA) and overrides any URL found with the <code class="codeph">-tsacert</code> option. The <code class="codeph">-tsa</code> option doesn&rsquo;t require the TSA public key certificate to be present in the keystore.</p>
<p>To generate the time stamp, <code class="codeph">jarsigner</code> communicates with the TSA with the Time-Stamp Protocol (TSP) defined in RFC 3161. When successful, the time stamp token returned by the TSA is stored with the signature in the signature block file.</p>
</dd>
<dt class="dlterm"><a id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-87956D40-3BC0-426E-BAE0-424EFB4C601B"><!-- --></a><code class="codeph">-tsacert <span class="variable">alias</span></code></dt>
<dd>
<p>When <code class="codeph">-tsacert alias</code> appears on the command line when signing a JAR file, a time stamp is generated for the signature. The alias identifies the TSA public key certificate in the keystore that is in effect. The entry's certificate is examined for a Subject Information Access extension that contains a URL identifying the location of the TSA.</p>
<p>The TSA public key certificate must be present in the keystore when using the <code class="codeph">-tsacert</code> option.</p>
</dd>
<dt class="dlterm"><a id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-9B096F7D-B29B-440B-B765-55FB84A1E608"><!-- --></a><code class="codeph">-tsapolicyid <span class="variable">policyid</span></code></dt>
<dd>
<p>Specifies the object identifier (OID) that identifies the policy ID to be sent to the TSA server. If this option isn&rsquo;t specified, no policy ID is sent and the TSA server will choose a default policy ID.</p>
<p>Object identifiers are defined by X.696, which is an ITU Telecommunication Standardization Sector (ITU-T) standard. These identifiers are typically period-separated sets of non-negative digits like <code class="codeph">1.2.3.4</code>, for example.</p>
</dd>
<dt class="dlterm"><a id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-2C246C98-4F46-4177-ACE9-656D6042185B"><!-- --></a><code class="codeph">&mdash;tsadigestalg <span class="variable">algorithm</span></code></dt>
<dd>
<p>Specifies the message digest algorithm that is used to generate the message imprint to be sent to the TSA server. If this option isn&rsquo;t specified, SHA-256 will be used.</p>
<p>See <a href="jarsigner.htm#GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__SUPPORTEDALGORITHMS-9B9E0E06">Supported Algorithms</a>.</p>
<p>For a list of standard message digest algorithm names, see <a href="https://docs.oracle.com/javase/10/docs/specs/security/standard-names.html" target="_blank">Java Security Standard Algorithm Names</a>.</p>
</dd>
<dt class="dlterm"><a id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-14658619-5176-469F-8C64-EF35B4EADDA5"><!-- --></a><code class="codeph">-internalsf</code></dt>
<dd>
<p>In the past, the <code class="codeph">.DSA</code> (signature block) file generated when a JAR file was signed included a complete encoded copy of the <code class="codeph">.SF</code> file (signature file) also generated. This behavior has been changed. To reduce the overall size of the output JAR file, the <code class="codeph">.DSA</code> file by default doesn&rsquo;t contain a copy of the <code class="codeph">.SF</code> file anymore. If <code class="codeph">-internalsf</code> appears on the command line, then the old behavior is utilized. This option is useful for testing. In practice, don&rsquo;t use the <code class="codeph">-internalsf</code> option because it incurs higher overhead.</p>
</dd>
<dt class="dlterm"><a id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-D752AACD-5CB7-47B0-AB88-1F6D86039765"><!-- --></a><code class="codeph">-sectionsonly</code></dt>
<dd>
<p>If the <code class="codeph">-sectionsonly</code> option appears on the command line, then the <code class="codeph">.SF</code> file (signature file) generated when a JAR file is signed doesn&rsquo;t include a header that contains a hash of the whole manifest file. It contains only the information and hashes related to each individual source file included in the JAR file. See Signature File.</p>
<p>By default, this header is added, as an optimization. When the header is present, whenever the JAR file is verified, the verification can first check to see whether the hash in the header matches the hash of the whole manifest file. When there is a match, verification proceeds to the next step. When there is no match, it is necessary to do a less optimized verification that the hash in each source file information section in the <code class="codeph">.SF</code> file equals the hash of its corresponding section in the manifest file. See <a href="jarsigner.htm#GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__CCHDCIBD">JAR File Verification</a>.</p>
<p>The <code class="codeph">-sectionsonly</code> option is primarily used for testing. It shouldn&rsquo;t be used other than for testing because using it incurs higher overhead.</p>
</dd>
<dt class="dlterm"><a id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-0DB4C4BF-31AB-46EC-BE52-559CAC74803E"><!-- --></a><code class="codeph">-protected</code></dt>
<dd>
<p>Values can be either <code class="codeph">true</code> or <code class="codeph">false</code>. Specify <code class="codeph">true</code> when a password must be specified through a protected authentication path such as a dedicated PIN reader.</p>
</dd>
<dt class="dlterm"><a id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-4D34E80E-53D8-4410-AA22-863F8AC87199"><!-- --></a><code class="codeph">-providerName <span class="variable">providerName</span></code></dt>
<dd>
<p>If more than one provider was configured in the <code class="codeph">java.security</code> security properties file, then you can use the <code class="codeph">-providerName</code> option to target a specific provider instance. The argument to this option is the name of the provider.</p>
<p>For the Oracle PKCS #11 provider, <code class="codeph"><span class="variable">providerName</span></code> is of the form <code class="codeph">SunPKCS11-<span class="variable">TokenName</span></code>, where <code class="codeph"><span class="variable">TokenName</span></code> is the name suffix that the provider instance has been configured with, as detailed in the configuration attributes table. For example, the following command lists the contents of the <code class="codeph">PKCS #11</code> keystore provider instance with name suffix <code class="codeph">SmartCard</code>:</p>
<pre dir="ltr">
jarsigner -keystore NONE -storetype PKCS11
        -providerName SunPKCS11-SmartCard
        -list
</pre></dd>
<dt class="dlterm"><a id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-E322263D-7CD6-48F4-906B-CE1102818642"><!-- --></a><code class="codeph">-addprovider <span class="variable">name</span>[-providerArg <span class="variable">arg</span>]</code></dt>
<dd>
<p>Adds a security provider by name (such as SunPKCS11) and an optional configure argument for <code class="codeph">-addprovider</code>.</p>
</dd>
<dt class="dlterm"><a id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-C79C5D40-3296-4761-89C7-403E786F5247"><!-- --></a><code class="codeph">-providerClass <span class="variable">provider-class-name</span>[-providerArg <span class="variable">arg</span>]</code></dt>
<dd>
<p>Used to specify the name of cryptographic service provider's master class file when the service provider isn&rsquo;t listed in the <code class="codeph">java.security</code> security properties file. Adds a security provider by fully-qualified class name and an optional configure argument for the <code class="codeph">-providerClass</code>.</p>
<p>Used with the <code class="codeph">-providerArg ConfigFilePath</code> option, the <code class="codeph">keytool</code> and <code class="codeph">jarsigner</code> tools install the provider dynamically and use <code class="codeph">ConfigFilePath</code> for the path to the token configuration file. The following example shows a command to list a <code class="codeph">PKCS #11</code> keystore when the Oracle PKCS #11 provider wasn&rsquo;t configured in the security properties file.</p>
<pre dir="ltr">
jarsigner -keystore NONE -storetype PKCS11
          -providerClass sun.security.pkcs11.SunPKCS11
          -providerArg /mydir1/mydir2/token.config
</pre></dd>
<dt class="dlterm"><a id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-68BB3416-68CA-4AF7-B89B-BBC3ECBD513E"><!-- --></a><code class="codeph">-J<span class="variable">javaoption</span></code></dt>
<dd>
<p>Passes through the specified <code class="codeph"><span class="variable">javaoption</span></code> string directly to the Java interpreter. The <code class="codeph">jarsigner</code> command is a wrapper around the interpreter. This option shouldn&rsquo;t contain any spaces. It is useful for adjusting the execution environment or memory usage. For a list of possible interpreter options, type <code class="codeph">java -h</code> or <code class="codeph">java -X</code> at the command line.</p>
</dd>
<dt class="dlterm"><a id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-E8B4EE6F-229A-4307-97CC-53CB4F9BEC74"><!-- --></a><code class="codeph">-strict</code></dt>
<dd>
<p>During the signing or verifying process, the command may issue warning messages. If you specify this option, the exit code of the tool reflects the severe warning messages that this command found. See <a href="jarsigner.htm#GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__BGBIIAAG">Errors and Warnings</a>.</p>
</dd>
<dt class="dlterm"><a id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-49A3F64D-3441-4045-93B5-3B8C7F1E74B3"><!-- --></a><code class="codeph">-conf <span class="variable">url</span></code></dt>
<dd>
<p>Specifies a pre-configured options file.</p>
</dd>
</dl>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Deprecated Options</p>
<p>The following <code class="codeph">jarsigner</code> options are <span>deprecated as of JDK 9 and might be removed in a future JDK release.</span></p>
<dl>
<dt class="dlterm"><a id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-27951A1D-CDF5-4D32-A69A-950378B6A48E"><!-- --></a><code class="codeph">-altsigner <span class="variable">class</span></code></dt>
<dd>
<p>This option specifies an alternative signing mechanism. The fully qualified class name identifies a class file that extends the <code class="codeph">com.sun.jarsigner.ContentSigner</code> abstract class. The path to this class file is defined by the <code class="codeph">-altsignerpath</code> option. If the <code class="codeph">-altsigner</code> option is used, then the <code class="codeph">jarsigner</code> command uses the signing mechanism provided by the specified class. Otherwise, the <code class="codeph">jarsigner</code> command uses its default signing mechanism.</p>
<p>For example, to use the signing mechanism provided by a class named <code class="codeph">com.sun.sun.jarsigner.AuthSigner</code>, use the <code class="codeph">jarsigner</code> option <code class="codeph">-altsigner com.sun.jarsigner.AuthSigner</code>.</p>
</dd>
<dt class="dlterm"><a id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-D98BC464-50D9-4B10-9D00-27E90D513B03"><!-- --></a><code class="codeph">-altsignerpath <span class="variable">classpathlist</span></code></dt>
<dd>
<p>Specifies the path to the class file and any JAR file it depends on. The class file name is specified with the <code class="codeph">-altsigner</code> option. If the class file is in a JAR file, then this option specifies the path to that JAR file.</p>
<p>An absolute path or a path relative to the current directory can be specified. If <code class="codeph"><span class="variable">classpathlist</span></code> contains multiple paths or JAR files, then they should be separated with a:</p>
<ul style="list-style-type: disc;">
<li>
<p>Colon (:) on Oracle Solaris, Linux, and macOS</p>
</li>
<li>
<p>Semicolon (;) on Windows</p>
</li>
</ul>
<p>This option isn&rsquo;t necessary when the class is already in the search path.</p>
<p>The following example shows how to specify the path to a JAR file that contains the class file. The JAR file name is included.</p>
<pre dir="ltr">
-altsignerpath /home/user/lib/authsigner.jar
</pre>
<p>The following example shows how to specify the path to the JAR file that contains the class file. The JAR file name is omitted.</p>
<pre dir="ltr">
-altsignerpath /home/user/classes/com/sun/tools/jarsigner/
</pre></dd>
</dl>
</div>
<!-- class="section" -->
<div class="section" id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__BGBIIAAG">
<p class="subhead1">Errors and Warnings</p>
<p>During the signing or verifying process, the <code class="codeph">jarsigner</code> command may issue various errors or warnings.</p>
<p>If there is a failure, the <code class="codeph">jarsigner</code> command exits with code 1. If there is no failure, but there are one or more severe warnings, the <code class="codeph">jarsigner</code> command exits with code 0 when the <code class="codeph">-strict</code> option is <span class="bold">not</span> specified, or exits with the OR-value of the warning codes when the <code class="codeph">-strict</code> is specified. If there is only informational warnings or no warning at all, the command always exits with code 0.</p>
<p>For example, if a certificate used to sign an entry is expired and has a KeyUsage extension that doesn&rsquo;t allow it to sign a file, the <code class="codeph">jarsigner</code> command exits with code 12 (=4+8) when the <code class="codeph">-strict</code> option is specified.</p>
<p><span class="bold">Note:</span> Exit codes are reused because only the values from 0 to 255 are legal on Oracle Solaris, Linux, and OS X.</p>
<p>The following sections describes the names, codes, and descriptions of the errors and warnings that the <code class="codeph">jarsigner</code> command can issue.</p>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Failure</p>
<p>Reasons why the <code class="codeph">jarsigner</code> command fails include (but aren&rsquo;t limited to) a command line parsing error, the inability to find a keypair to sign the JAR file, or the verification of a signed JAR fails.</p>
<dl>
<dt class="dlterm"><a id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-436C6B34-48F8-4859-B515-206811063270"><!-- --></a>failure</dt>
<dd>
<p>Code 1. The signing or verifying fails.</p>
</dd>
</dl>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Severe Warnings</p>
<div class="infobox-note" id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-6B1F9333-9506-422D-9CE8-F9047503B109">
<p class="notep1">Note:</p>
<p>Severe warnings are reported as errors if you specify the <code class="codeph">-strict</code> option.</p>
</div>
<p>Reasons why the <code class="codeph">jarsigner</code> command issues a severe warning include the certificate used to sign the JAR file has an error or the signed JAR file has other problems.</p>
<dl>
<dt class="dlterm"><a id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-33F3C598-9844-4FAC-B6F6-7456D3074AEA"><!-- --></a>hasExpiredCert</dt>
<dd>
<p>Code 4. This JAR contains entries whose signer certificate has expired.</p>
</dd>
<dt class="dlterm"><a id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-915659AD-B96A-426A-8223-503346A7D3DF"><!-- --></a>notYetValidCert</dt>
<dd>
<p>Code 4. This JAR contains entries whose signer certificate isn&rsquo;t yet valid.</p>
</dd>
<dt class="dlterm"><a id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-2FB6B625-A297-418B-BBF0-C60C861E05FE"><!-- --></a>chainNotValidated</dt>
<dd>
<p>Code 4. This JAR contains entries whose certificate chain isn&rsquo;t validated.</p>
</dd>
<dt class="dlterm"><a id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-8FE7F319-E665-45EC-BE82-3416E141023E"><!-- --></a>signerSelfSigned</dt>
<dd>
<p>Code 4. This JAR contains entries whose signer certificate is self signed.</p>
</dd>
<dt class="dlterm"><a id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-280AB9B2-DF17-4967-91C5-29CE2CFA4066"><!-- --></a>weakAlg</dt>
<dd>
<p>Code 4. An algorithm specified on the command line is considered a security risk.</p>
</dd>
<dt class="dlterm"><a id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-86F6C447-BD50-4464-8F6E-71F6AA8231B0"><!-- --></a>badKeyUsage</dt>
<dd>
<p>Code 8. This JAR contains entries whose signer certificate's KeyUsage extension doesn&rsquo;t allow code signing.</p>
</dd>
<dt class="dlterm"><a id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-E332FD6A-227E-4C26-BA88-431F02EE8F3C"><!-- --></a>badExtendedKeyUsage</dt>
<dd>
<p>Code 8. This JAR contains entries whose signer certificate's ExtendedKeyUsage extension doesn&rsquo;t allow code signing.</p>
</dd>
<dt class="dlterm"><a id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-2FD31072-4FCA-426A-A4A6-D413499CFBF6"><!-- --></a>badNetscapeCertType</dt>
<dd>
<p>Code 8. This JAR contains entries whose signer certificate's NetscapeCertType extension doesn&rsquo;t allow code signing.</p>
</dd>
<dt class="dlterm"><a id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-5D6643D6-D266-4EE7-9B1B-D48B9742E3FC"><!-- --></a>hasUnsignedEntry</dt>
<dd>
<p>Code 16. This JAR contains unsigned entries which haven&rsquo;t been integrity-checked.</p>
</dd>
<dt class="dlterm"><a id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-6ABF4536-1318-4591-AD02-E0AC02ED6A4C"><!-- --></a>notSignedByAlias</dt>
<dd>
<p>Code 32. This JAR contains signed entries which aren&rsquo;t signed by the specified alias(es).</p>
</dd>
<dt class="dlterm"><a id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-9055442D-534A-4088-B00A-DD7C2964ABBB"><!-- --></a>aliasNotInStore</dt>
<dd>
<p>Code 32. This JAR contains signed entries that aren&rsquo;t signed by alias in this keystore.</p>
</dd>
<dt class="dlterm"><a id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-8229A865-D667-4BCF-8481-1E30B23C9FF1"><!-- --></a>tsaChainNotValidated</dt>
<dd>
<p>Code 64. This JAR contains entries whose TSA certificate chain is invalid.</p>
</dd>
</dl>
</div>
<!-- class="section" -->
<div class="section">
<p class="subhead1">Informational Warnings</p>
<p>Informational warnings include those that aren&rsquo;t errors but regarded as bad practice. They don&rsquo;t have a code.</p>
<dl>
<dt class="dlterm"><a id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-DBB19A17-E966-498A-8707-80BA68E213AA"><!-- --></a>hasExpiringCert</dt>
<dd>
<p>This JAR contains entries whose signer certificate expires within six months.</p>
</dd>
<dt class="dlterm"><a id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-2A03F610-2E80-4AEA-95C7-751643C52E74"><!-- --></a>noTimestamp</dt>
<dd>
<p>This JAR contains signatures that doesn&rsquo;t include a timestamp. Without a timestamp, users may not be able to validate this JAR file after the signer certificate's expiration date (<code class="codeph">YYYY-MM-DD</code>) or after any future revocation date.</p>
</dd>
</dl>
</div>
<!-- class="section" -->
<div class="section" id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__EXAMPLEOFSIGNINGAJARFILE-98AC2C8D">
<p class="subhead1">Example of Signing a JAR File</p>
<p>Use the following command to sign <code class="codeph">bundle.jar</code> with the private key of a user whose keystore alias is <code class="codeph">jane</code> in a keystore named <code class="codeph">mystore</code> in the <code class="codeph">working</code> directory and name the signed JAR file <code class="codeph">sbundle.jar</code>:</p>
<pre dir="ltr">
jarsigner -keystore /working/mystore
    -storepass &lt;keystore password&gt;
    -keypass &lt;private key password&gt;
    -signedjar sbundle.jar bundle.jar jane
</pre>
<p>There is no <code class="codeph">-sigfile</code> specified in the previous command so the generated <code class="codeph">.SF</code> and <code class="codeph">.DSA</code> files to be placed in the signed JAR file have default names based on the alias name. They are named <code class="codeph">JANE.SF</code> and <code class="codeph">JANE.DSA</code>.</p>
<p>If you want to be prompted for the store password and the private key password, then you could shorten the previous command to the following:</p>
<pre dir="ltr">
jarsigner -keystore /working/mystore
    -signedjar sbundle.jar bundle.jar jane
</pre>
<p>If the <code class="codeph">keystore</code> is the default <code class="codeph">keystore</code> (<code class="codeph">.keystore</code> in your home directory), then you don&rsquo;t need to specify a <code class="codeph">keystore</code>, as follows:</p>
<pre dir="ltr">
jarsigner -signedjar sbundle.jar bundle.jar jane
</pre>
<p>If you want the signed JAR file to overwrite the input JAR file (<code class="codeph">bundle.jar</code>), then you don&rsquo;t need to specify a <code class="codeph">-signedjar</code> option, as follows:</p>
<pre dir="ltr">
jarsigner bundle.jar jane
</pre></div>
<!-- class="section" -->
<div class="section" id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__EXAMPLEOFVERIFYINGASIGNEDJARFILE-98AC326E">
<p class="subhead1">Example of Verifying a Signed JAR File</p>
<p>To verify a signed JAR file to ensure that the signature is valid and the JAR file wasn&rsquo;t been tampered with, use a command such as the following:</p>
<pre dir="ltr">
jarsigner -verify sbundle.jar
</pre>
<p>When the verification is successful, <code class="codeph">jar verified</code> is displayed. Otherwise, an error message is displayed. You can get more information when you use the <code class="codeph">-verbose</code> option. A sample use of <code class="codeph">jarsigner</code> with the <code class="codeph">-verbose</code> option follows:</p>
<pre dir="ltr">
jarsigner -verify -verbose sbundle.jar
 
           198 Fri Sep 26 16:14:06 PDT 1997 META-INF/MANIFEST.MF
           199 Fri Sep 26 16:22:10 PDT 1997 META-INF/JANE.SF
          1013 Fri Sep 26 16:22:10 PDT 1997 META-INF/JANE.DSA
    smk   2752 Fri Sep 26 16:12:30 PDT 1997 AclEx.class
    smk    849 Fri Sep 26 16:12:46 PDT 1997 test.class
 
      s = signature was verified
      m = entry is listed in manifest
      k = at least one certificate was found in keystore
 
    jar verified.
</pre></div>
<!-- class="section" -->
<div class="section" id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__EXAMPLEOFVERIFICATIONWITHCERTIFICAT-98AC3750">
<p class="subhead1">Example of Verification with Certificate Information</p>
<p>If you specify the <code class="codeph">-certs</code> option with the <code class="codeph">-verify</code> and <code class="codeph">-verbose</code> options, then the output includes certificate information for each signer of the JAR file. The information includes the certificate type, the signer distinguished name information (when it is an X.509 certificate), and in parentheses, the keystore alias for the signer when the public key certificate in the JAR file matches the one in a keystore entry, for example:</p>
<pre dir="ltr">
jarsigner -keystore /working/mystore -verify -verbose -certs myTest.jar
 
           198 Fri Sep 26 16:14:06 PDT 1997 META-INF/MANIFEST.MF
           199 Fri Sep 26 16:22:10 PDT 1997 META-INF/JANE.SF
          1013 Fri Sep 26 16:22:10 PDT 1997 META-INF/JANE.DSA
           208 Fri Sep 26 16:23:30 PDT 1997 META-INF/JAVATEST.SF
          1087 Fri Sep 26 16:23:30 PDT 1997 META-INF/JAVATEST.DSA
    smk   2752 Fri Sep 26 16:12:30 PDT 1997 Tst.class
 
      X.509, CN=Test Group, OU=Java Software, O=Oracle, L=CUP, S=CA, C=US (javatest)
      X.509, CN=Jane Smith, OU=Java Software, O=Oracle, L=cup, S=ca, C=us (jane)
 
      s = signature was verified
      m = entry is listed in manifest
      k = at least one certificate was found in keystore
 
    jar verified.
</pre>
<p>If the certificate for a signer isn&rsquo;t an X.509 certificate, then there is no distinguished name information. In that case, just the certificate type and the alias are shown. For example, if the certificate is a PGP certificate, and the alias is <code class="codeph">bob</code>, then you would get: <code class="codeph">PGP, (bob)</code>.</p>
</div>
<!-- class="section" --></div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment186">
<tr>
<td class="cellalignment198">
<table class="cellalignment191">
<tr>
<td class="cellalignment190"><a href="keytool.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment190"><a href="kinit.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1993, 2018, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment200">
<table class="cellalignment189">
<tr>
<td class="cellalignment190"><a href="http://docs.oracle.com/javase/10/index.html"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment190"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment190"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
