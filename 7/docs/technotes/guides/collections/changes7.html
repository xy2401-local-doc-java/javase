<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en-US" xmlns="http://www.w3.org/1999/xhtml">
<head>

<title>Collections Framework Enhancements in Java SE 7</title>

<script language="javascript1.2" type="text/javascript" src="../../../../../webdesign/pubs/js/popUp.js"></script>
<script language="javascript1.2" type="text/javascript" src="../../../../../webdesign/pubs/js/sniff.js"></script>
<script language="javascript1.2" type="text/javascript" src="../../../../../webdesign/pubs/js/menucontent.js"></script>
<script language="javascript1.2" type="text/javascript" src="../../../../../webdesign/pubs/js/menucode.js"></script>
<script language="javascript1.2" type="text/javascript" src="../../../../../webdesign/pubs/js/developer.js"></script>
<script language="javascript1.2" type="text/javascript" src="../../../../../webdesign/other/js/search.js"></script>
<link rel="stylesheet" href="../../../../../webdesign/pubs/css/default_developer.css" />
<meta name="collection" content="reference"/> 
<script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>
<body>
<noscript>JavaScript is not supported by your browser. JavaScript
support is required for full functionality of this page.</noscript>
<div class="a0 a0v1" id="a0v1"><!-- BEGIN A1 COMPONENT V.0 -->
<div class="a1 a1r2">
<div class="a1v0"><a href="#skip2content" class="skiplink">Skip to
Content</a></div>
</div>
<!-- END A1 COMPONENT V.0 -->
<!-- BEGIN A2 COMPONENT V.1 -->
<div class="a2w0">
<div class="a2" id="a2v1">
<div class="a2w1">
<div class="a2w2">
<div class="a2w3">
<div class="a2w4">
<div class="a2topiclinks"><a href="http://www.oracle.com" title=
"Oracle Home Page" id="sunlogo" name="sunlogo"><img src=
"../../../../../webdesign/pubs/im/a.gif" alt="Home Page" width="98" height="58"
border="0" /></a>
<ul id="mtopics">
<li id="mtopic1"><a id="glink1" class="tpclink a2menu" title=
"See Oracle Technology Network" href="http://oracle.com/technology"
name="glink1">Oracle Technology Network</a></li>
<li id="mtopic2"><a id="glink2" class="tpclink a2menu" title=
"Software Downloads" href=
"http://www.oracle.com/technology/software/index.html" name=
"glink2">Software Downloads</a></li>
<li id="mtopic3"><a id="glink3" class="tpclink a2menu" title=
"See Java SE Documentation" href=
"http://download.oracle.com/javase/index.html" name=
"glink3">Documentation</a></li>
</ul>
<div class="a2search"><a href="../../../../../search.html" target=
"_blank">Search</a></div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<!-- END A2 COMPONENT V.1 -->
<!-- BEGIN SEPARATOR -->
<div class="hr">
<hr /></div>
<!-- END SEPARATOR -->
<!-- ============ -->
<!-- MAIN CONTENT -->
<!-- ============ -->
<a name="skip2content" id="skip2content"></a>


<div class="smallpagetitle"><h1>Collections Framework Enhancements in Java SE 7</h1></div>

<h2>New Interface, TransferQueue</h2>

<p>The interface <a href=
"../../../api/java/util/concurrent/TransferQueue.html"><code>TransferQueue</code></a> has been added. It is a refinement of the <tt><a href=
"../../../api/java/util/concurrent/BlockingQueue.html">BlockingQueue</a></tt>
interface in which producers can wait for consumers to receive elements. One implementation of the new interface is also included in this release, <a href=
"../../../api/java/util/concurrent/LinkedTransferQueue.html"><code>LinkedTransferQueue</code></a>.</p>

<h2>Improved Hash Function</h2>

<p>Java SE 7u6 introduces an improved, alternative hash function for the following map and map-derived collection implementations:</p>

<ul>
  <li><code><a href="../../../api/java/util/HashMap.html">HashMap</a></code></li>
  <li><code><a href="../../../api/java/util/Hashtable.html">Hashtable</a></code></li>
  <li><code><a href="../../../api/java/util/HashSet.html">HashSet</a></code></li>
  <li><code><a href="../../../api/java/util/LinkedHashMap.html">LinkedHashMap</a></code></li>
  <li><code><a href="../../../api/java/util/LinkedHashSet.html">LinkedHashSet</a></code></li>
  <li><code><a href="../../../api/java/util/WeakHashMap.html">WeakHashMap</a></code></li>
  <li><code><a href="../../../api/java/util/concurrent/ConcurrentHashMap.html">ConcurrentHashMap</a></code></li>
</ul>

<p>The alternative hash function improves the performance of these map implementations when a large number of key hash collisions are encountered.</p>

<p>For Java SE 7u6, this alternative hash function is implemented as follows:</p>

<ul>
  <li><p>The alternative hash function is only applied to maps with a capacity larger than a specified threshold size. By default, the threshold is <code>-1</code>. This value disables the alternative hash function. To enable the alternative hash function, set the <code>jdk.map.althashing.threshold</code> system property to a different value. The recommended value is <code>512</code>. Setting this system property to <code>512</code> causes all maps with a capacity larger than 512 entries to use the alternative hash function. You can set this system property to <code>0</code>, which causes all maps to use the alternative hash function.</p>
  
  <p>The following describes the <code>jdk.map.althashing.threshold</code> system property in more detail:</p>
  
  <ul>
    <li>Value type: Integer</li>
    <li>Value default: <code>-1</code></li>
    <li>Value range: From -1 to 2147483647, inclusive</li>
    <li>Description: Threshold capacity at which maps use the alternative hash function. The value <code>-1</code> is a synonym for <code>2147483647</code> (which is easier to remember). All other values correspond to threshold capacity.</li>
  </ul>
  
  <p>For example, the following command runs the Java application <code>MyApplication</code> and sets the <code>jdk.map.althashing.threshold</code> system property to <code>512</code>:</p>
  
  <pre>java -Djdk.map.althashing.threshold=512 MyApplication</pre>
  
  </li>
  
  <li>
    <p>If the alternative hash function is being used, then the iteration order of keys, values, and entities vary for each instance of <code>HashMap</code>, <code>Hashtable</code>, <code>HashSet</code>, and <code>ConcurrentHashMap</code>. This change in iteration order may cause compatibility issues with some programs. This is the reason that the alternative hash function is disabled by default. Hashing improvements will be investigated in future releases. In the meantime, the system property <code>jdk.map.althashing.threshold</code> is experimental. It is strongly recommended that you test your applications with the alternative hashing function enabled (by setting <code>jdk.map.althashing.threshold</code> to 0) to determine if your applications are affected by iteration order. If there is an impact, you should fix your applications as soon as possible because there is no guarantee of iteration order.</p></li>
</ul>


<div id="javasefooter">
<div class="hr">
<hr /></div>
<div id="javasecopyright">
<a href="../../../legal/cpyr.html">Copyright &#169;</a> 1993, 2018, Oracle
and/or its affiliates. All rights reserved.
</div>

<div id="javasecontactus">
<a href="http://docs.oracle.com/javase/feedback.html">Contact Us</a>
</div>
</div>
</div>

<!-- Start SiteCatalyst code   -->
<script language="JavaScript" type="text/javascript" src="http://www.oracle.com/ocom/groups/systemobject/@mktg_admin/documents/systemobject/s_code_download.js"></script>
<script language="JavaScript" type="text/javascript" src="http://www.oracle.com/ocom/groups/systemobject/@mktg_admin/documents/systemobject/s_code.js"></script>
 
<!-- ********** DO NOT ALTER ANYTHING BELOW THIS LINE ! *********** -->
<!--  Below code will send the info to Omniture server -->
<script language="javascript" type="text/javascript">var s_code=s.t();if(s_code)document.write(s_code)</script>
 
<!-- End SiteCatalyst code -->

</body>
</html>
